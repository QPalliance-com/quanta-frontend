<p-toast></p-toast>
<div class="card flex flex-col gap-6 w-full">
    <h2 class="text-2xl font-semibold mb-6">Productos</h2>
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Code -->
            <div>
                <label for="code" class="block text-sm font-medium text-gray-700 mb-1">Código</label>
                <input id="code" pInputText formControlName="code" class="w-full" />
                <small *ngIf="form.get('code')?.invalid && form.get('code')?.touched" class="text-red-500">Requerido</small>
            </div>

            <!-- Name -->
            <div>
                <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
                <input id="name" pInputText formControlName="name" class="w-full" />
                <small *ngIf="form.get('name')?.invalid && form.get('name')?.touched" class="text-red-500">Requerido</small>
            </div>

            <!-- Type -->
            <div>
                <label for="type" class="block text-sm font-medium text-gray-700 mb-1">Tipo</label>
                <p-select id="type" formControlName="type" [options]="productTypes" optionLabel="label" optionValue="value" placeholder="Selecciona un tipo" class="w-full"></p-select>
            </div>

            <!-- Unit -->
            <div>
                <label for="unit" class="block text-sm font-medium text-gray-700 mb-1">Unidad</label>
                <input id="unit" pInputText formControlName="unit" class="w-full" />
            </div>

            <!-- Estimated Unit Price -->
            <div>
                <label for="estimatedUnitPrice" class="block text-sm font-medium text-gray-700 mb-1">Precio Unitario Estimado</label>
                <p-inputNumber inputId="estimatedUnitPrice" formControlName="estimatedUnitPrice" [mode]="'currency'" currency="USD" locale="en-US" class="w-full"></p-inputNumber>
            </div>

            <!-- Default Location -->
            <div>
                <label for="defaultLocation" class="block text-sm font-medium text-gray-700 mb-1">Ubicación por defecto</label>
                <input id="defaultLocation" pInputText formControlName="defaultLocation" class="w-full" />
            </div>
            <!-- Description -->
            <div>
                <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Descripción</label>
                <textarea id="description" pInputTextarea formControlName="description" rows="3" class="w-full"></textarea>
            </div>
            <!-- Active Status -->
            <div class="flex items-center gap-2">
                <p-checkbox inputId="isActive" formControlName="isActive" [binary]="true"></p-checkbox>
                <label for="isActive" class="text-sm font-medium text-gray-700">Activo</label>
            </div>
        </div>
        <div class="grid grid-cols-2 md:grid-cols-2 gap-6"></div>
        <p-fieldset legend="Variaciones del producto" toggleable="true" class="p-mt-4">
            <app-product-variant-form [variationsFormArray]="variationsFormArray"></app-product-variant-form>
        </p-fieldset>

        <!-- Submit -->
        <div class="flex justify-end gap-4 pt-6 border-t mt-6">
            <button pButton type="button" class="p-button-secondary" (click)="cancel()">Cancelar</button>
            <button pButton type="submit" label="Guardar" [disabled]="form.invalid"></button>
        </div>
    </form>
</div>
