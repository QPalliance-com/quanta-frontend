import{a as Se}from"./chunk-A33N7LZ2.js";import{a as wt,b as Li,c as ki,d as Vi,e as Qt,f as Ni,g as Ht}from"./chunk-DP7ENUHC.js";import{a as jt,b as Mi,c as Di,d as qt}from"./chunk-BVQ7I4TR.js";import{A as nt,B as ve,C as Pi,D as rt,F as at,G as lt,H as st,c as Ci,g as Y,h as Z,i as Ii,j as Fi,k as wi,l as Ge,m as We,n as Ke,o as Ye,r as Ze,s as Je,t as Xe,u as et,v as tt,w as Ei,x as Oi,y as it,z as ot}from"./chunk-F5UVFZVV.js";import{$a as W,A as fe,Ab as Qe,Bb as qe,Cb as Q,Da as U,Db as He,Ea as De,Eb as q,Fa as _e,Fb as be,G as gi,Gb as ne,I as hi,Ja as Le,K as zt,Ma as ke,Sa as vi,Xa as Tt,Za as yi,_a as Ve,ab as ge,b as ie,bb as K,c as oe,d as M,db as Ne,e as yt,eb as T,f as Oe,gb as he,h as ui,hb as $e,i as Pe,ib as xi,j as D,jb as It,k as Ut,kb as Ft,lb as Ue,mb as Si,n as xt,nb as Ti,ob as Re,p as G,qb as Be,rb as Ae,sb as ze,t as fi,ta as bi,va as Me,y as St,yb as j,za as I,zb as je}from"./chunk-N54YMLIK.js";import{c as _i,d as Rt,f as Bt,h as At}from"./chunk-F2X3VGZZ.js";import{$b as Fe,Ab as v,Eb as h,Fb as m,Gb as ri,Hb as ai,Jb as li,K as A,Kb as O,La as oi,Lb as te,Ma as ni,Mb as x,Nb as S,Oa as l,P as V,Qb as ue,Rb as p,Sb as C,Ta as F,Tb as w,U as ee,Ub as Ie,V as b,Vb as mt,Wb as dt,Xb as ut,Yb as P,Za as E,Zb as si,_b as ye,a as Jt,aa as _,b as Xt,ba as g,bb as de,bc as pi,ca as ei,cc as ci,db as d,ea as J,f as B,fc as mi,hc as pe,jc as xe,ka as L,kb as y,kc as di,la as ti,lb as s,lc as k,mb as Te,ob as Ct,pb as X,qa as ii,qb as N,rb as Vt,sb as Nt,tb as $t,tc as z,ub as a,uc as we,vb as r,wb as u,xb as le,xc as Ee,y as vt,yb as se,zb as H}from"./chunk-6ZUVEJ7B.js";var $i=(()=>{class t extends vi{pathId;ngOnInit(){this.pathId="url(#"+bi()+")"}static \u0275fac=(()=>{let e;return function(n){return(e||(e=J(t)))(n||t)}})();static \u0275cmp=E({type:t,selectors:[["UploadIcon"]],features:[de],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.58942 9.82197C6.70165 9.93405 6.85328 9.99793 7.012 10C7.17071 9.99793 7.32234 9.93405 7.43458 9.82197C7.54681 9.7099 7.61079 9.55849 7.61286 9.4V2.04798L9.79204 4.22402C9.84752 4.28011 9.91365 4.32457 9.98657 4.35479C10.0595 4.38502 10.1377 4.40039 10.2167 4.40002C10.2956 4.40039 10.3738 4.38502 10.4467 4.35479C10.5197 4.32457 10.5858 4.28011 10.6413 4.22402C10.7538 4.11152 10.817 3.95902 10.817 3.80002C10.817 3.64102 10.7538 3.48852 10.6413 3.37602L7.45127 0.190618C7.44656 0.185584 7.44176 0.180622 7.43687 0.175736C7.32419 0.063214 7.17136 0 7.012 0C6.85264 0 6.69981 0.063214 6.58712 0.175736C6.58181 0.181045 6.5766 0.186443 6.5715 0.191927L3.38282 3.37602C3.27669 3.48976 3.2189 3.6402 3.22165 3.79564C3.2244 3.95108 3.28746 4.09939 3.39755 4.20932C3.50764 4.31925 3.65616 4.38222 3.81182 4.38496C3.96749 4.3877 4.11814 4.33001 4.23204 4.22402L6.41113 2.04807V9.4C6.41321 9.55849 6.47718 9.7099 6.58942 9.82197ZM11.9952 14H2.02883C1.751 13.9887 1.47813 13.9228 1.22584 13.8061C0.973545 13.6894 0.746779 13.5241 0.558517 13.3197C0.370254 13.1154 0.22419 12.876 0.128681 12.6152C0.0331723 12.3545 -0.00990605 12.0775 0.0019109 11.8V9.40005C0.0019109 9.24092 0.065216 9.08831 0.1779 8.97579C0.290584 8.86326 0.443416 8.80005 0.602775 8.80005C0.762134 8.80005 0.914966 8.86326 1.02765 8.97579C1.14033 9.08831 1.20364 9.24092 1.20364 9.40005V11.8C1.18295 12.0376 1.25463 12.274 1.40379 12.4602C1.55296 12.6463 1.76817 12.7681 2.00479 12.8H11.9952C12.2318 12.7681 12.447 12.6463 12.5962 12.4602C12.7453 12.274 12.817 12.0376 12.7963 11.8V9.40005C12.7963 9.24092 12.8596 9.08831 12.9723 8.97579C13.085 8.86326 13.2378 8.80005 13.3972 8.80005C13.5565 8.80005 13.7094 8.86326 13.8221 8.97579C13.9347 9.08831 13.998 9.24092 13.998 9.40005V11.8C14.022 12.3563 13.8251 12.8996 13.45 13.3116C13.0749 13.7236 12.552 13.971 11.9952 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(o,n){o&1&&(ei(),a(0,"svg",0)(1,"g"),u(2,"path",1),r(),a(3,"defs")(4,"clipPath",2),u(5,"rect",3),r()()()),o&2&&(X(n.getClassNames()),y("aria-label",n.ariaLabel)("aria-hidden",n.ariaHidden)("role",n.role),l(),y("clip-path",n.pathId),l(3),s("id",n.pathId))},encapsulation:2})}return t})();var re=class t{constructor(i){this.httpClient=i}getDepartments(){return this.httpClient.get("https://api-colombia.com/api/v1/Department")}static \u0275fac=function(e){return new(e||t)(ee(G))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};var ae=class t{constructor(i){this.httpClient=i}getCitiesByDepartment(i){return this.httpClient.get(`https://api-colombia.com/api/v1/Department/${i}/cities`)}getAllCities(){return this.httpClient.get("https://api-colombia.com/api/v1/City")}static \u0275fac=function(e){return new(e||t)(ee(G))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};var pt=class t{constructor(i){this.http=i}baseUrl=`${He.apiUrl}pur/suppliers`;getAllSuppliers(){return this.http.get(this.baseUrl)}getSupplierById(i){return this.http.get(`${this.baseUrl}/${i}`)}createSupplier(i){return this.http.post(this.baseUrl,i)}updateSupplier(i,e){return this.http.put(`${this.baseUrl}/${i}`,e)}deleteSupplier(i){return this.http.delete(`${this.baseUrl}/${i.id}`)}static \u0275fac=function(e){return new(e||t)(ee(G))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};var io={supplierList:[],supplier:null,query:""},$=je(qe(io),Qe((t,i=b(pt),e=b(I))=>({loadAllSuppliers:q(B(A(()=>i.getAllSuppliers().pipe(Q({next:o=>{j(t,{supplierList:o.data}),e.add({severity:"success",summary:"Completado",detail:o.message})},error:()=>{}}))))),loadSupplier:q(B(A(({id:o})=>i.getSupplierById(o).pipe(Q({next:n=>{j(t,{supplier:n.data}),e.add({severity:"success",summary:"Completado",detail:n.message})},error:n=>{e.add({severity:"error",summary:"Error",detail:n.message})}}))))),addSupplier:q(B(A(o=>i.createSupplier(o).pipe(Q({next:n=>{j(t,{supplier:n.data}),e.add({severity:"success",summary:"Creado",detail:n.message,life:3e3})},error:()=>{}}))))),updateSupplier:q(B(A(({supplier:o,id:n})=>i.updateSupplier(n,o).pipe(Q({next:c=>{j(t,{supplier:c.data}),e.add({severity:"success",summary:"Actualizado",detail:c.message,life:3e3})},error:()=>{}})))))})));var oo=["suppliersTable"],no=()=>({width:"800px"});function ro(t,i){if(t&1){let e=v();a(0,"p-button",12),h("onClick",function(){_(e);let n=m(2);return g(n.openNew())}),r()}}function ao(t,i){if(t&1){let e=v();a(0,"p-button",13),h("onClick",function(){_(e);let n=m(2);return g(n.exportCSV())}),r()}}function lo(t,i){if(t&1){let e=v();a(0,"div",14)(1,"div",15),p(2,"Proveedores"),r(),a(3,"p-iconfield"),u(4,"p-inputicon",16),a(5,"input",17),h("input",function(n){_(e),m();let c=ue(7),f=m();return g(f.onGlobalFilter(c,n))}),r()()()}}function so(t,i){t&1&&(a(0,"tr")(1,"th",18),p(2,"Empresa "),u(3,"p-sortIcon",19),r(),a(4,"th",20),p(5,"Contacto "),u(6,"p-sortIcon",21),r(),a(7,"th",22),p(8,"Tipo Doc. "),u(9,"p-sortIcon",23),r(),a(10,"th",24),p(11,"N\xFAmero "),u(12,"p-sortIcon",25),r(),a(13,"th",26),p(14,"DV "),u(15,"p-sortIcon",27),r(),a(16,"th",28),p(17,"Tel\xE9fono "),u(18,"p-sortIcon",29),r(),a(19,"th",30),p(20,"Email "),u(21,"p-sortIcon",31),r(),a(22,"th",32),p(23,"Acciones"),r()())}function po(t,i){if(t&1){let e=v();a(0,"tr")(1,"td"),p(2),r(),a(3,"td"),p(4),r(),a(5,"td"),p(6),r(),a(7,"td"),p(8),r(),a(9,"td"),p(10),r(),a(11,"td"),p(12),r(),a(13,"td"),p(14),r(),a(15,"td",32)(16,"button",33),h("click",function(){let n=_(e).$implicit,c=m(2);return g(c.viewSupplier(n))}),r(),a(17,"button",34),h("click",function(){let n=_(e).$implicit,c=m(2);return g(c.editSupplier(n))}),r()()()}if(t&2){let e=i.$implicit;l(2),C(e.companyName),l(2),C(e.contactName),l(2),C(e.documentType),l(2),C(e.documentNumber),l(2),C(e.dv||"-"),l(2),C(e.phone),l(2),C(e.email)}}function co(t,i){if(t&1&&(a(0,"div",7)(1,"p-toolbar",8),d(2,ro,1,0,"ng-template",null,0,k)(4,ao,1,0,"ng-template",null,1,k),r(),a(6,"p-table",9,2),d(8,lo,6,0,"ng-template",null,3,k)(10,so,24,0,"ng-template",10)(11,po,18,7,"ng-template",11),r()()),t&2){let e=m();l(6),s("value",e.suppliersStore.supplierList())("paginator",!0)("globalFilterFields",e.filterFields)("rows",10)("columns",e.cols)("resizableColumns",!0)("scrollable",!0)("showCurrentPageReport",!0)}}function mo(t,i){if(t&1&&(a(0,"div")(1,"b"),p(2,"DV:"),r(),p(3),r()),t&2){let e=m(2);l(3),w(" ",e.selectedSupplier.dv,"")}}function uo(t,i){if(t&1&&(a(0,"div",35)(1,"div")(2,"b"),p(3,"Empresa:"),r(),p(4),r(),a(5,"div")(6,"b"),p(7,"Contacto:"),r(),p(8),r(),a(9,"div")(10,"b"),p(11,"Tipo Documento:"),r(),p(12),r(),a(13,"div")(14,"b"),p(15,"N\xFAmero:"),r(),p(16),r(),d(17,mo,4,1,"div",36),a(18,"div")(19,"b"),p(20,"Email:"),r(),p(21),r(),a(22,"div")(23,"b"),p(24,"Tel\xE9fono:"),r(),p(25),r(),a(26,"div")(27,"b"),p(28,"Direcci\xF3n:"),r(),p(29),r(),a(30,"div")(31,"b"),p(32,"Departamento:"),r(),p(33),r(),a(34,"div")(35,"b"),p(36,"Ciudad:"),r(),p(37),r(),a(38,"div")(39,"b"),p(40,"Plazo pago:"),r(),p(41),r(),a(42,"div")(43,"b"),p(44,"Cr\xE9dito: "),r(),p(45),pe(46,"currency"),r()()),t&2){let e=m();l(4),w(" ",e.selectedSupplier.companyName,""),l(4),w(" ",e.selectedSupplier.contactName,""),l(4),w(" ",e.selectedSupplier.documentType,""),l(4),w(" ",e.selectedSupplier.documentNumber,""),l(),s("ngIf",e.selectedSupplier.dv),l(4),w(" ",e.selectedSupplier.email,""),l(4),w(" ",e.selectedSupplier.phone,""),l(4),w(" ",e.selectedSupplier.address,""),l(4),w(" ",e.departmentsMap.get(e.selectedSupplier.departmentId),""),l(4),w(" ",e.citiesMap.get(e.selectedSupplier.cityId),""),l(4),w(" ",e.selectedSupplier.paymentTerm," d\xEDas"),l(4),w(" ",xe(46,12,e.selectedSupplier.creditLimit,"COP"),"")}}var Ot=class t{constructor(i,e,o,n){this.messageService=i;this.router=e;this.departmentService=o;this.cityService=n}filterFields=["companyName","contactName","documentType","documentNumber","email","address","phone","creditLimit","paymentTerms","seller","department.name","city.name"];exportColumns;cols;supplierDialog=!1;suppliersStore=b($);supplier;departmentsMap=new Map;citiesMap=new Map;msg;selectedSupplier;displayViewDialog=!1;suppliersTable;ngOnInit(){this.cols=[{field:"companyName",header:"Empresa",customExportHeader:"Nombre de la Empresa"},{field:"contactName",header:"Contacto",customExportHeader:"Nombre del Contacto"},{field:"documentType",header:"Tipo Doc.",customExportHeader:"Tipo de Documento"},{field:"documentNumber",header:"N\xB0 Documento",customExportHeader:"N\xFAmero de Documento"},{field:"dv",header:"DV",customExportHeader:"D\xEDgito de Verificaci\xF3n"},{field:"email",header:"Correo",customExportHeader:"Correo Electr\xF3nico"},{field:"address",header:"Direcci\xF3n",customExportHeader:"Direcci\xF3n del Proveedor"},{field:"phone",header:"Tel\xE9fono",customExportHeader:"N\xFAmero Telef\xF3nico"},{field:"creditLimit",header:"L\xEDmite Cr\xE9dito",customExportHeader:"L\xEDmite de Cr\xE9dito"},{field:"paymentTerms",header:"Plazo Pago",customExportHeader:"Plazo de Pago"},{field:"seller",header:"Vendedor",customExportHeader:"Nombre del Vendedor"},{field:"department.name",header:"Departamento",customExportHeader:"Departamento"},{field:"city.name",header:"Ciudad",customExportHeader:"Ciudad"}],this.exportColumns=this.cols.map(i=>({title:i.header,dataKey:i.field})),vt([this.departmentService.getDepartments(),this.cityService.getAllCities()]).subscribe({next:([i,e])=>{this.departmentsMap=new Map(i.map(o=>[o.id,o.name])),this.citiesMap=new Map(e.map(o=>[o.id,o.name]))},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Fallo al cargar datos"})}}),this.suppliersStore.loadAllSuppliers()}onGlobalFilter(i,e){i.filterGlobal(e.target.value,"contains")}openNew(){this.router.navigate(["/purchases/suppliers-form/new"])}exportCSV(){this.suppliersTable.exportCSV()}viewSupplier(i){this.selectedSupplier=i,this.displayViewDialog=!0}editSupplier(i){this.router.navigate(["/purchases/suppliers-form/edit",i.id])}static \u0275fac=function(e){return new(e||t)(F(I),F(fe),F(re),F(ae))};static \u0275cmp=E({type:t,selectors:[["app-supplier-list"]],viewQuery:function(e,o){if(e&1&&te(oo,5),e&2){let n;x(n=S())&&(o.suppliersTable=n.first)}},features:[P([I,Me,$,re,ae])],decls:5,vars:7,consts:[["start",""],["end",""],["suppliersTable",""],["caption",""],["class","card",4,"ngIf"],["header","Detalle del proveedor",3,"visibleChange","visible","modal"],["class","grid grid-cols-2 gap-2 text-sm",4,"ngIf"],[1,"card"],["styleClass","mb-12"],["responsiveLayout","scroll","scrollHeight","500px","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords}",3,"value","paginator","globalFilterFields","rows","columns","resizableColumns","scrollable","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["label","Nuevo proveedor","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],["label","Exportar CSV","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"font-semibold","text-xl","mb-4"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full",3,"input"],["pSortableColumn","companyName"],["field","companyName"],["pSortableColumn","contactName"],["field","contactName"],["pSortableColumn","documentType"],["field","documentType"],["pSortableColumn","documentNumber"],["field","documentNumber"],["pSortableColumn","dv"],["field","dv"],["pSortableColumn","phone"],["field","phone"],["pSortableColumn","email"],["field","email"],[1,"text-center"],["pButton","","icon","pi pi-eye","title","Ver proveedor",1,"p-button-sm","p-button-rounded","p-button-text","p-button-info",3,"click"],["pButton","","icon","pi pi-pencil",1,"p-button-sm","p-button-rounded","p-button-text",3,"click"],[1,"grid","grid-cols-2","gap-2","text-sm"],[4,"ngIf"]],template:function(e,o){e&1&&(d(0,co,12,8,"div",4),u(1,"p-toast")(2,"p-confirmdialog"),a(3,"p-dialog",5),ut("visibleChange",function(c){return dt(o.displayViewDialog,c)||(o.displayViewDialog=c),c}),d(4,uo,47,15,"div",6),r()),e&2&&(s("ngIf",o.suppliersStore.supplierList()),l(3),Ct(si(6,no)),mt("visible",o.displayViewDialog),s("modal",!0),l(),s("ngIf",o.selectedSupplier))},dependencies:[D,M,Pe,ne,be,U,it,Xe,et,tt,Z,Y,Ae,K,W,ge,Ve,wt,nt,ot,ve,rt,Pi,at,Ye,Ke,We,Ge,st,lt],encapsulation:2})};var Kt=(c=>(c.NIT="NIT",c.CC="CC",c.CE="CE",c.PASSPORT="PASSPORT",c.OTHER="OTHER",c))(Kt||{}),qi={NIT:"NIT - N\xFAmero de Identificaci\xF3n Tributaria",CC:"C\xE9dula de Ciudadan\xEDa",CE:"C\xE9dula de Extranjer\xEDa",PASSPORT:"Pasaporte",OTHER:"Otro"};function fo(t,i){t&1&&(a(0,"div")(1,"label",33),p(2,"D\xEDgito de verificaci\xF3n"),r(),u(3,"input",34),r())}var ht=class t{constructor(i,e,o,n,c,f){this.route=i;this.router=e;this.fb=o;this.msg=n;this.departmentService=c;this.cityService=f;Ee(()=>{let me=this.suppliersStore.supplier();me&&this.form.patchValue(me)})}suppliersStore=b($);departments=[];cities=[];documentTypes=Object.values(Kt).map(i=>({label:qi[i],value:i}));paymentTerms=[{label:"15 d\xEDas",value:"15"},{label:"30 d\xEDas",value:"30"},{label:"60 d\xEDas",value:"60"}];form;editMode=!1;supplierId=null;ngOnInit(){this.form=this.fb.group({contactName:["",T.required],companyName:["",T.required],documentType:["",T.required],documentNumber:["",T.required],dv:[""],email:["",[T.required,T.email]],address:["",T.required],phone:["",T.required],creditLimit:[null],paymentTerm:["",T.required],departmentId:[null,T.required],cityId:[null,T.required]}),this.loadDepartments(),this.form.get("documentType")?.valueChanges.subscribe(i=>{i!=="NIT"&&this.form.get("dv")?.setValue("")}),this.route.paramMap.subscribe(i=>{let e=i.get("id");e&&(this.editMode=!0,this.supplierId=+e,this.form.patchValue(this.suppliersStore.loadSupplier({id:e})))})}loadDepartments(){this.departmentService.getDepartments().subscribe({next:i=>this.departments=i,error:()=>this.msg.add({severity:"error",summary:"Error",detail:"No se pudo cargar departamentos"})})}onDepartmentChange(i){this.cityService.getCitiesByDepartment(i).subscribe({next:e=>this.cities=e,error:()=>this.msg.add({severity:"error",summary:"Error",detail:"No se pudo cargar ciudades"})})}onSubmit(){if(this.form.invalid)return;let i=this.form.value;this.editMode&&this.supplierId!==null?this.suppliersStore.updateSupplier({id:this.supplierId,supplier:i}):this.suppliersStore.addSupplier(i)}cancel(){this.router.navigate(["/purchases/suppliers"])}static \u0275fac=function(e){return new(e||t)(F(St),F(fe),F(Be),F(I),F(re),F(ae))};static \u0275cmp=E({type:t,selectors:[["app-supplier-form"]],features:[P([I,$,pt,re,ae])],decls:75,vars:7,consts:[[1,"card","flex","flex-col","gap-6","w-full"],[1,"text-2xl","font-semibold","mb-6"],[1,"grid","grid-cols-1","gap-6",3,"ngSubmit","formGroup"],[1,"border","p-4","rounded"],[1,"text-sm","font-bold","text-gray-600","px-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mt-2"],["for","contactName",1,"text-sm","mb-1","block"],["pInputText","","fluid","","id","contactName","formControlName","contactName"],["for","email",1,"text-sm","mb-1","block"],["pInputText","","fluid","","id","email","formControlName","email","type","email"],["for","phone",1,"text-sm","mb-1","block"],["pInputText","","fluid","","id","phone","formControlName","phone","type","tel"],[1,"grid","grid-cols-1","md:grid-cols-1","gap-4","mt-2"],["for","companyName",1,"text-sm","mb-1","block","w-full"],["pInputText","","fluid","","id","companyName","formControlName","companyName"],["for","documentType",1,"text-sm","mb-1","block"],["fluid","","inputId","documentType","formControlName","documentType","optionLabel","label","optionValue","value","showFilter","","placeholder","Seleccionar",3,"options"],["for","documentNumber",1,"text-sm","mb-1","block"],["pInputText","","fluid","","id","documentNumber","formControlName","documentNumber"],[4,"ngIf"],["for","departmentId",1,"text-sm","mb-1","block"],["fluid","","inputId","departmentId","formControlName","departmentId","optionLabel","name","optionValue","id","showFilter","","placeholder","Seleccionar departamento",3,"onChange","options"],["for","cityId",1,"text-sm","mb-1","block"],["fluid","","inputId","cityId","formControlName","cityId","optionLabel","name","optionValue","id","showFilter","","placeholder","Seleccionar ciudad",3,"options"],["for","address",1,"text-sm","mb-1","block","w-full"],["pInputText","","fluid","","id","address","formControlName","address"],["for","paymentTerm",1,"text-sm","mb-1","block"],["fluid","","inputId","paymentTerm","formControlName","paymentTerm","optionLabel","label","optionValue","value","showFilter","","placeholder","Seleccionar",3,"options"],["for","creditLimit",1,"text-sm","mb-1","block"],["pInputText","","fluid","","id","creditLimit","type","number","formControlName","creditLimit"],[1,"flex","justify-end","gap-3","mt-6"],["pButton","","type","button",1,"p-button-secondary",3,"click"],["pButton","","type","submit","label","Guardar",3,"disabled"],["for","dv",1,"text-sm","mb-1","block"],["pInputText","","fluid","","id","dv","formControlName","dv"]],template:function(e,o){if(e&1&&(u(0,"p-toast"),a(1,"div",0)(2,"h2",1),p(3,"Proveedor"),r(),a(4,"form",2),h("ngSubmit",function(){return o.onSubmit()}),a(5,"fieldset",3)(6,"legend",4),p(7,"Informaci\xF3n de contacto"),r(),a(8,"div",5)(9,"div")(10,"label",6),p(11,"Nombre de contacto"),r(),u(12,"input",7),r(),a(13,"div")(14,"label",8),p(15,"Correo electr\xF3nico"),r(),u(16,"input",9),r(),a(17,"div")(18,"label",10),p(19,"Tel\xE9fono"),r(),u(20,"input",11),r()()(),a(21,"fieldset",3)(22,"legend",4),p(23,"Empresa"),r(),a(24,"div",12)(25,"div")(26,"label",13),p(27,"Nombre empresa"),r(),u(28,"input",14),r()()(),a(29,"fieldset",3)(30,"legend",4),p(31,"Identificaci\xF3n"),r(),a(32,"div",5)(33,"div")(34,"label",15),p(35,"Tipo de documento"),r(),u(36,"p-select",16),r(),a(37,"div")(38,"label",17),p(39,"N\xFAmero de documento"),r(),u(40,"input",18),r(),d(41,fo,4,0,"div",19),r()(),a(42,"fieldset",3)(43,"legend",4),p(44,"Ubicaci\xF3n"),r(),a(45,"div",5)(46,"div")(47,"label",20),p(48,"Departamento"),r(),a(49,"p-select",21),h("onChange",function(c){return o.onDepartmentChange(c.value)}),r()(),a(50,"div")(51,"label",22),p(52,"Ciudad"),r(),u(53,"p-select",23),r()(),a(54,"div",12)(55,"div")(56,"label",24),p(57,"Direcci\xF3n"),r(),u(58,"input",25),r()()(),a(59,"fieldset",3)(60,"legend",4),p(61,"Condiciones comerciales"),r(),a(62,"div",5)(63,"div")(64,"label",26),p(65,"Plazo de pago"),r(),u(66,"p-select",27),r(),a(67,"div")(68,"label",28),p(69,"L\xEDmite de cr\xE9dito"),r(),u(70,"input",29),r()()(),a(71,"div",30)(72,"button",31),h("click",function(){return o.cancel()}),p(73,"Cancelar"),r(),u(74,"button",32),r()()()),e&2){let n;l(4),s("formGroup",o.form),l(32),s("options",o.documentTypes),l(5),s("ngIf",((n=o.form.get("documentType"))==null?null:n.value)==="NIT"),l(8),s("options",o.departments),l(4),s("options",o.cities),l(13),s("options",o.paymentTerms),l(8),s("disabled",o.form.invalid)}},dependencies:[D,M,Z,Y,K,W,ve,ze,It,Ne,Ft,he,$e,Ue,Re,ne,be,Je,Ze,gi],encapsulation:2})};var ct=class t{constructor(i){this.http=i}baseUrl=`${He.apiUrl}pur/purchase-orders`;companyStore=b(Se);getAllPurchaseOrders(){return this.http.get(this.baseUrl)}getPurchaseOrderById(i){return this.http.get(`${this.baseUrl}/${i}`)}createPurchaseOrder(i){return this.http.post(this.baseUrl,i)}updatePurchaseOrder(i,e){return this.http.put(`${this.baseUrl}/${i}`,e)}deletePurchaseOrder(i){return this.http.delete(`${this.baseUrl}/${i}`)}createOrdersFromOSP(i){let e=this.groupBySupplier(i),o=Object.keys(e).map(n=>{let c=this.mapToPurchaseOrder(e[+n]);return console.log(c),this.createPurchaseOrder(c)});return vt(o)}groupBySupplier(i){return i.reduce((e,o)=>{let n=o.preferredSupplierId;return e[n]||(e[n]=[]),e[n].push(o),e},{})}mapToPurchaseOrder(i){return{id:null,companyName:this.companyStore.company()?.companyName||"",supplierId:i[0].preferredSupplierId,receptionDate:null,dueDate:null,deliveryDays:null,cecos:null,participation:null,status:"Solicitada",items:i.map(e=>({productId:e.product.id,name:e.product.name,unit:e.unit||e.product.unit,quantity:e.requiredQuantity,unitPrice:null,observations:null}))}}static \u0275fac=function(e){return new(e||t)(ee(G))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};var go={purchaseOrderList:[],purchaseOrder:null,query:""},ce=je(qe(go),Qe((t,i=b(ct),e=b(I))=>({loadAllPurchaseOrders:q(B(A(()=>i.getAllPurchaseOrders().pipe(Q({next:o=>{j(t,{purchaseOrderList:o.data}),e.add({severity:"success",summary:"Completado",detail:o.message})},error:()=>{}}))))),loadPurchaseOrder:q(B(A(({id:o})=>i.getPurchaseOrderById(o).pipe(Q({next:n=>{j(t,{purchaseOrder:n.data}),e.add({severity:"success",summary:"Completado",detail:n.message})},error:n=>{e.add({severity:"error",summary:"Error",detail:n.message})}}))))),addPurchaseOrder:q(B(A(o=>i.createPurchaseOrder(o).pipe(Q({next:n=>{j(t,{purchaseOrder:n.data}),e.add({severity:"success",summary:"Creado",detail:n.message,life:3e3})},error:()=>{}}))))),updatePurchaseOrder:q(B(A(({purchaseOrder:o,id:n})=>i.updatePurchaseOrder(n,o).pipe(Q({next:c=>{j(t,{purchaseOrder:c.data}),e.add({severity:"success",summary:"Actualizado",detail:c.message,life:3e3})},error:()=>{}}))))),addPurchasesFromOSP:q(B(A(o=>i.createOrdersFromOSP(o).pipe(Q({next:n=>{let c=n.map(f=>f.data).filter(Boolean);j(t,{purchaseOrderList:c}),e.add({severity:"success",summary:"\xD3rdenes creadas",detail:`Se crearon ${c.length} \xF3rdenes a partir de OSP.`,life:3e3})},error:n=>{e.add({severity:"error",summary:"Error",detail:"No se pudieron crear las \xF3rdenes.",life:3e3})}})))))})));var ho=["ordersTable"],bo=(t,i,e,o)=>({"bg-blue-500":t,"bg-yellow-500":i,"bg-red-500":e,"bg-green-500":o});function vo(t,i){if(t&1){let e=v();a(0,"p-button",10),h("onClick",function(){_(e);let n=m(2);return g(n.openNew())}),r()}}function Co(t,i){if(t&1){let e=v();a(0,"p-button",11),h("onClick",function(){_(e);let n=m(2);return g(n.exportCSV())}),r()}}function yo(t,i){if(t&1){let e=v();a(0,"div",12)(1,"div",13),p(2,"Ordenes de compra"),r(),a(3,"p-iconfield"),u(4,"p-inputicon",14),a(5,"input",15),h("input",function(n){_(e),m();let c=ue(7),f=m();return g(f.onGlobalFilter(c,n))}),r()()()}}function xo(t,i){if(t&1&&(a(0,"th",18),p(1),u(2,"p-sortIcon",19),r()),t&2){let e=i.$implicit;s("pSortableColumn",e.field),l(),w("",e.header," "),l(),s("field",e.field)}}function So(t,i){if(t&1&&(a(0,"tr"),d(1,xo,3,3,"th",16),a(2,"th",17),p(3,"Acciones"),r()()),t&2){let e=m(2);l(),s("ngForOf",e.cols)}}function To(t,i){if(t&1&&(le(0),a(1,"span",25),p(2),r(),se()),t&2){let e=i.$implicit;l(2),Ie(" ",e.cecoName," - ",e.participation,"% ")}}function Io(t,i){if(t&1){let e=v();a(0,"tr")(1,"td",20),p(2),r(),a(3,"td",20),p(4),r(),a(5,"td",20),p(6),r(),a(7,"td",20),p(8),pe(9,"date"),r(),a(10,"td",20),p(11),pe(12,"date"),r(),a(13,"td",20),p(14),r(),a(15,"td",20),d(16,To,3,2,"ng-container",21),r(),a(17,"td",20)(18,"span",22),p(19),r()(),a(20,"td",17)(21,"button",23),h("click",function(){let n=_(e).$implicit,c=m(2);return g(c.viewPurchaseOrder(n))}),r(),a(22,"button",24),h("click",function(){let n=_(e).$implicit,c=m(2);return g(c.editPurchaseOrder(n))}),r()()()}if(t&2){let e=i.$implicit,o=m(2);l(2),C(e.id),l(2),C(e.companyName),l(2),C(o.findSupplierName(e.supplierId)),l(2),C(xe(9,9,e.receptionDate,"yyyy-MM-dd")),l(3),C(xe(12,12,e.dueDate,"yyyy-MM-dd")),l(3),C(e.deliveryDays),l(2),s("ngForOf",e.cecos),l(2),s("ngClass",pi(15,bo,e.status==="Solicitada",e.status==null?null:e.status.includes("Enviada"),e.status==="Rechazada",e.status==="Aceptada")),l(),w(" ",e.status," ")}}function Fo(t,i){if(t&1&&(a(0,"div",5)(1,"p-toolbar",6),d(2,vo,1,0,"ng-template",null,0,k)(4,Co,1,0,"ng-template",null,1,k),r(),a(6,"p-table",7,2),d(8,yo,6,0,"ng-template",null,3,k)(10,So,4,1,"ng-template",8)(11,Io,23,20,"ng-template",9),r()()),t&2){let e=m();l(6),s("value",e.purchaseOrderStore.purchaseOrderList())("paginator",!0)("globalFilterFields",e.filterFields)("rows",10)("columns",e.cols)("resizableColumns",!0)("scrollable",!0)("showCurrentPageReport",!0)}}var Mt=class t{constructor(i,e,o){this.purchaseOrderService=i;this.messageService=e;this.router=o}companyStore=b(Se);filterFields=["id","companyName","supplierId","receptionDate","dueDate","deliveryDays","ceco.label","participation","status"];exportColumns;cols;order;selectedOrders;suppliersStore=b($);purchaseOrderStore=b(ce);selectedPurchaseOrder;displayViewDialog=!1;ordersTable;ngOnInit(){this.cols=[{field:"id",header:"ID"},{field:"companyName",header:"Empresa"},{field:"supplierId",header:"Proveedor"},{field:"receptionDate",header:"Fecha de recepci\xF3n"},{field:"dueDate",header:"Fecha de vencimiento"},{field:"deliveryDays",header:"D\xEDas para entregar"},{field:"cecos",header:"Centros de costo"},{field:"status",header:"Estado"}],this.exportColumns=this.cols.map(i=>({title:i.header,dataKey:i.field})),this.suppliersStore.loadAllSuppliers(),this.purchaseOrderStore.loadAllPurchaseOrders()}findSupplierName(i){return this.suppliersStore.supplierList().find(e=>e.id===i)?.companyName||"Desconocido"}onGlobalFilter(i,e){i.filterGlobal(e.target.value,"contains")}openNew(){this.router.navigate(["/purchases/orders-form/new"])}exportCSV(){this.ordersTable.exportCSV()}viewPurchaseOrder(i){this.selectedPurchaseOrder=i,this.displayViewDialog=!0}editPurchaseOrder(i){this.router.navigate(["/purchases/orders-form/edit",i.id])}static \u0275fac=function(e){return new(e||t)(F(ct),F(I),F(fe))};static \u0275cmp=E({type:t,selectors:[["app-purchase-orders"]],viewQuery:function(e,o){if(e&1&&te(ho,5),e&2){let n;x(n=S())&&(o.ordersTable=n.first)}},features:[P([I,Me,$,Se,ce])],decls:2,vars:1,consts:[["start",""],["end",""],["ordersTable",""],["caption",""],["class","card",4,"ngIf"],[1,"card"],["styleClass","mb-12"],["responsiveLayout","scroll","scrollHeight","500px","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords}",3,"value","paginator","globalFilterFields","rows","columns","resizableColumns","scrollable","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["label","Nueva orden de compra","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],["label","Exportar CSV","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"font-semibold","text-xl","mb-4"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[1,"text-center"],[3,"pSortableColumn"],[3,"field"],[1,"px-4","py-2"],[4,"ngFor","ngForOf"],[1,"px-2","py-1","rounded","text-white",3,"ngClass"],["pButton","","icon","pi pi-eye","title","Ver solicitud de compra",1,"p-button-sm","p-button-rounded","p-button-text","p-button-info",3,"click"],["pButton","","icon","pi pi-pencil",1,"p-button-sm","p-button-rounded","p-button-text",3,"click"],[1,"inline-flex","items-center","bg-gray-100","text-gray-800","text-xs","font-medium","px-2","py-1","rounded","mr-1"]],template:function(e,o){e&1&&(d(0,Fo,12,8,"div",4),u(1,"p-confirmdialog")),e&2&&s("ngIf",o.purchaseOrderStore.purchaseOrderList())},dependencies:[D,ie,oe,M,ui,it,Xe,U,et,tt,Ae,Z,Y,K,W,ge,Ve,ne,nt,ot,ve,rt,at,Ye,Ke,We,Ge,st,lt],encapsulation:2})};function wo(t,i){if(t&1){let e=v();a(0,"div",19)(1,"button",20),h("click",function(){_(e);let n=m().index,c=m();return g(c.removeItem(n))}),r()()}}function Eo(t,i){if(t&1){let e=v();a(0,"div",9),d(1,wo,2,0,"div",10),a(2,"div",11)(3,"div")(4,"label",12),p(5,"Producto"),r(),a(6,"p-autoComplete",13),h("completeMethod",function(n){_(e);let c=m();return g(c.searchProducts(n))})("onSelect",function(n){let c=_(e).index,f=m();return g(f.onProductSelect(c,n.value))}),r()(),a(7,"div")(8,"label",12),p(9,"Unidad"),r(),u(10,"input",14),r(),a(11,"div")(12,"label",12),p(13,"Cantidad"),r(),u(14,"input",15),r(),a(15,"div")(16,"label",12),p(17,"Precio"),r(),u(18,"input",16),r(),a(19,"div")(20,"label",12),p(21,"Observaciones"),r(),u(22,"input",17),r(),a(23,"div")(24,"label",12),p(25,"Subtotal"),r(),u(26,"input",18),r()()()}if(t&2){let e=i.$implicit,o=i.index,n=m();s("formGroup",e),l(),s("ngIf",o>0),l(5),s("suggestions",n.productsStore.productsListItems()),l(20),s("value",e.value.quantity*e.value.unitPrice||0)}}var Dt=class t{constructor(i){this.fb=i;Ee(()=>{this.productOptions=this.productsStore.productsListItems()})}itemsFormArray;productOptions=[];productsStore=b(Qt);ngOnInit(){}addItem(){this.itemsFormArray.push(this.createItemGroup())}removeItem(i){this.itemsFormArray.removeAt(i)}createItemGroup(){return this.fb.group({productId:0,name:"",unit:"",quantity:1,unitPrice:null,observations:""})}searchProducts(i){let e=i.query.toLowerCase();this.productsStore.searchProducts(e)}onProductSelect(i,e){let o=this.itemsFormArray.at(i);o&&e&&o.patchValue({productId:e.id,name:e.name,unit:e.unit??""})}get totalItemsSubtotal(){return this.itemsFormArray?.controls?.map(i=>(i.value.quantity||0)*(i.value.unitPrice||0))?.reduce((i,e)=>i+e,0)||0}static \u0275fac=function(e){return new(e||t)(F(Be))};static \u0275cmp=E({type:t,selectors:[["app-purchase-items-table"]],inputs:{itemsFormArray:"itemsFormArray"},features:[P([Qt])],decls:14,vars:6,consts:[[1,"flex","justify-between","items-center","mb-3","mt-8"],[1,"text-lg","font-semibold"],["pButton","","label","Agregar \xCDtem","icon","pi pi-plus","type","button",1,"mt-0",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-1","gap-4"],["class","border relative p-4 rounded shadow-sm bg-white",3,"formGroup",4,"ngFor","ngForOf"],[1,"flex","justify-end","mt-4"],[1,"bg-gray-100","rounded","px-6","py-3","flex","items-center","gap-4"],[1,"font-semibold","text-gray-700"],[1,"text-lg","font-bold","text-gray-900"],[1,"border","relative","p-4","rounded","shadow-sm","bg-white",3,"formGroup"],["class","absolute top-2 right-2",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-2"],[1,"block","text-xs","font-medium","text-gray-700","mb-1"],["field","name","minLength","3","formControlName","name","placeholder","Producto","styleClass","w-full",1,"w-full",3,"completeMethod","onSelect","suggestions"],["pInputText","","formControlName","unit","placeholder","Unidad"],["pInputText","","type","number","formControlName","quantity","placeholder","Cantidad"],["pInputText","","type","number","formControlName","unitPrice","placeholder","Precio"],["pInputText","","formControlName","observations","placeholder","Observaciones"],["pInputText","","type","number","placeholder","Subtotal","readonly","",3,"value"],[1,"absolute","top-2","right-2"],["pButton","","icon","pi pi-trash","type","button",1,"p-button-danger","p-button-sm",3,"click"]],template:function(e,o){e&1&&(a(0,"div")(1,"div",0)(2,"h2",1),p(3,"\xCDtems de la Orden"),r(),a(4,"button",2),h("click",function(){return o.addItem()}),r()(),a(5,"div",3),d(6,Eo,27,4,"div",4),r(),a(7,"div",5)(8,"div",6)(9,"span",7),p(10,"Subtotal de \xEDtems:"),r(),a(11,"span",8),p(12),pe(13,"currency"),r()()()()),e&2&&(l(6),s("ngForOf",o.itemsFormArray.controls),l(6),w(" ",di(13,2,o.totalItemsSubtotal,"COP","symbol")," "))},dependencies:[D,oe,M,Pe,ze,Ne,Ft,he,$e,Ue,Re,Vi,ki,Z,Y,K,W],styles:[".p-autocomplete[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%}"]})};var Oo=["container"],Po=["icon"],Mo=["closeicon"],Do=["*"],Lo=(t,i)=>({showTransitionParams:t,hideTransitionParams:i}),ko=t=>({value:"visible()",params:t}),Vo=t=>({closeCallback:t});function No(t,i){t&1&&H(0)}function $o(t,i){if(t&1&&d(0,No,1,0,"ng-container",7),t&2){let e=m(2);s("ngTemplateOutlet",e.iconTemplate||e.iconTemplate)}}function Uo(t,i){if(t&1&&u(0,"i",3),t&2){let e=m(2);s("ngClass",e.icon)}}function Ro(t,i){if(t&1&&u(0,"span",9),t&2){let e=m(3);s("ngClass",e.cx("text"))("innerHTML",e.text,oi)}}function Bo(t,i){if(t&1&&(a(0,"div"),d(1,Ro,1,2,"span",8),r()),t&2){let e=m(2);l(),s("ngIf",!e.escape)}}function Ao(t,i){if(t&1&&(a(0,"span",5),p(1),r()),t&2){let e=m(3);s("ngClass",e.cx("text")),l(),C(e.text)}}function zo(t,i){if(t&1&&d(0,Ao,2,2,"span",10),t&2){let e=m(2);s("ngIf",e.escape&&e.text)}}function jo(t,i){t&1&&H(0)}function Qo(t,i){if(t&1&&d(0,jo,1,0,"ng-container",11),t&2){let e=m(2);s("ngTemplateOutlet",e.containerTemplate||e.containerTemplate)("ngTemplateOutletContext",ye(2,Vo,e.close.bind(e)))}}function qo(t,i){if(t&1&&(a(0,"span",5),ai(1),r()),t&2){let e=m(2);s("ngClass",e.cx("text"))}}function Ho(t,i){if(t&1&&u(0,"i",13),t&2){let e=m(3);s("ngClass",e.closeIcon)}}function Go(t,i){t&1&&H(0)}function Wo(t,i){if(t&1&&d(0,Go,1,0,"ng-container",7),t&2){let e=m(3);s("ngTemplateOutlet",e.closeIconTemplate||e._closeIconTemplate)}}function Ko(t,i){t&1&&u(0,"TimesIcon",14)}function Yo(t,i){if(t&1){let e=v();a(0,"button",12),h("click",function(n){_(e);let c=m(2);return g(c.close(n))}),d(1,Ho,1,1,"i",13)(2,Wo,1,1,"ng-container")(3,Ko,1,0,"TimesIcon",14),r()}if(t&2){let e=m(2);y("aria-label",e.closeAriaLabel),l(),N(e.closeIcon?1:-1),l(),N(e.closeIconTemplate||e._closeIconTemplate?2:-1),l(),N(!e.closeIconTemplate&&!e._closeIconTemplate&&!e.closeIcon?3:-1)}}function Zo(t,i){if(t&1&&(a(0,"div",1)(1,"div",2),d(2,$o,1,1,"ng-container")(3,Uo,1,1,"i",3)(4,Bo,2,1,"div",4)(5,zo,1,1,"ng-template",null,0,k)(7,Qo,1,4,"ng-container")(8,qo,2,1,"span",5)(9,Yo,4,4,"button",6),r()()),t&2){let e=ue(6),o=m();s("ngClass",o.containerClass)("@messageAnimation",ye(13,ko,Fe(10,Lo,o.showTransitionOptions,o.hideTransitionOptions))),y("aria-live","polite")("role","alert"),l(2),N(o.iconTemplate||o._iconTemplate?2:-1),l(),N(o.icon?3:-1),l(),s("ngIf",!o.escape)("ngIfElse",e),l(3),N(o.containerTemplate||o._containerTemplate?7:8),l(2),N(o.closable?9:-1)}}var Jo=({dt:t})=>`
.p-message {
    border-radius: ${t("message.border.radius")};
    outline-width: ${t("message.border.width")};
    outline-style: solid;
}

.p-message-content {
    display: flex;
    align-items: center;
    padding: ${t("message.content.padding")};
    gap: ${t("message.content.gap")};
    height: 100%;
}

.p-message-icon {
    flex-shrink: 0;
}

.p-message-close-button {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-inline-start: auto;
    overflow: hidden;
    position: relative;
    width: ${t("message.close.button.width")};
    height: ${t("message.close.button.height")};
    border-radius: ${t("message.close.button.border.radius")};
    background: transparent;
    transition: background ${t("message.transition.duration")}, color ${t("message.transition.duration")}, outline-color ${t("message.transition.duration")}, box-shadow ${t("message.transition.duration")}, opacity 0.3s;
    outline-color: transparent;
    color: inherit;
    padding: 0;
    border: none;
    cursor: pointer;
    user-select: none;
}

.p-message-close-icon {
    font-size: ${t("message.close.icon.size")};
    width: ${t("message.close.icon.size")};
    height: ${t("message.close.icon.size")};
}

.p-message-close-button:focus-visible {
    outline-width: ${t("message.close.button.focus.ring.width")};
    outline-style: ${t("message.close.button.focus.ring.style")};
    outline-offset: ${t("message.close.button.focus.ring.offset")};
}

.p-message-info {
    background: ${t("message.info.background")};
    outline-color: ${t("message.info.border.color")};
    color: ${t("message.info.color")};
    box-shadow: ${t("message.info.shadow")};
}

.p-message-info .p-message-close-button:focus-visible {
    outline-color: ${t("message.info.close.button.focus.ring.color")};
    box-shadow: ${t("message.info.close.button.focus.ring.shadow")};
}

.p-message-info .p-message-close-button:hover {
    background: ${t("message.info.close.button.hover.background")};
}

.p-message-info.p-message-outlined {
    color: ${t("message.info.outlined.color")};
    outline-color: ${t("message.info.outlined.border.color")};
}

.p-message-info.p-message-simple {
    color: ${t("message.info.simple.color")};
}

.p-message-success {
    background: ${t("message.success.background")};
    outline-color: ${t("message.success.border.color")};
    color: ${t("message.success.color")};
    box-shadow: ${t("message.success.shadow")};
}

.p-message-success .p-message-close-button:focus-visible {
    outline-color: ${t("message.success.close.button.focus.ring.color")};
    box-shadow: ${t("message.success.close.button.focus.ring.shadow")};
}

.p-message-success .p-message-close-button:hover {
    background: ${t("message.success.close.button.hover.background")};
}

.p-message-success.p-message-outlined {
    color: ${t("message.success.outlined.color")};
    outline-color: ${t("message.success.outlined.border.color")};
}

.p-message-success.p-message-simple {
    color: ${t("message.success.simple.color")};
}

.p-message-warn {
    background: ${t("message.warn.background")};
    outline-color: ${t("message.warn.border.color")};
    color: ${t("message.warn.color")};
    box-shadow: ${t("message.warn.shadow")};
}

.p-message-warn .p-message-close-button:focus-visible {
    outline-color: ${t("message.warn.close.button.focus.ring.color")};
    box-shadow: ${t("message.warn.close.button.focus.ring.shadow")};
}

.p-message-warn .p-message-close-button:hover {
    background: ${t("message.warn.close.button.hover.background")};
}

.p-message-warn.p-message-outlined {
    color: ${t("message.warn.outlined.color")};
    outline-color: ${t("message.warn.outlined.border.color")};
}

.p-message-warn.p-message-simple {
    color: ${t("message.warn.simple.color")};
}

.p-message-error {
    background: ${t("message.error.background")};
    outline-color: ${t("message.error.border.color")};
    color: ${t("message.error.color")};
    box-shadow: ${t("message.error.shadow")};
}

.p-message-error .p-message-close-button:focus-visible {
    outline-color: ${t("message.error.close.button.focus.ring.color")};
    box-shadow: ${t("message.error.close.button.focus.ring.shadow")};
}

.p-message-error .p-message-close-button:hover {
    background: ${t("message.error.close.button.hover.background")};
}

.p-message-error.p-message-outlined {
    color: ${t("message.error.outlined.color")};
    outline-color: ${t("message.error.outlined.border.color")};
}

.p-message-error.p-message-simple {
    color: ${t("message.error.simple.color")};
}

.p-message-secondary {
    background: ${t("message.secondary.background")};
    outline-color: ${t("message.secondary.border.color")};
    color: ${t("message.secondary.color")};
    box-shadow: ${t("message.secondary.shadow")};
}

.p-message-secondary .p-message-close-button:focus-visible {
    outline-color: ${t("message.secondary.close.button.focus.ring.color")};
    box-shadow: ${t("message.secondary.close.button.focus.ring.shadow")};
}

.p-message-secondary .p-message-close-button:hover {
    background: ${t("message.secondary.close.button.hover.background")};
}

.p-message-secondary.p-message-outlined {
    color: ${t("message.secondary.outlined.color")};
    outline-color: ${t("message.secondary.outlined.border.color")};
}

.p-message-secondary.p-message-simple {
    color: ${t("message.secondary.simple.color")};
}

.p-message-contrast {
    background: ${t("message.contrast.background")};
    outline-color: ${t("message.contrast.border.color")};
    color: ${t("message.contrast.color")};
    box-shadow: ${t("message.contrast.shadow")};
}

.p-message-contrast .p-message-close-button:focus-visible {
    outline-color: ${t("message.contrast.close.button.focus.ring.color")};
    box-shadow: ${t("message.contrast.close.button.focus.ring.shadow")};
}

.p-message-contrast .p-message-close-button:hover {
    background: ${t("message.contrast.close.button.hover.background")};
}

.p-message-contrast.p-message-outlined {
    color: ${t("message.contrast.outlined.color")};
    outline-color: ${t("message.contrast.outlined.border.color")};
}

.p-message-contrast.p-message-simple {
    color: ${t("message.contrast.simple.color")};
}

.p-message-text {
    display: inline-flex;
    align-items: center;
    font-size: ${t("message.text.font.size")};
    font-weight: ${t("message.text.font.weight")};
}

.p-message-icon {
    font-size: ${t("message.icon.size")};
    width: ${t("message.icon.size")};
    height: ${t("message.icon.size")};
}

.p-message-enter-from {
    opacity: 0;
}

.p-message-enter-active {
    transition: opacity 0.3s;
}

.p-message.p-message-leave-from {
    max-height: 1000px;
}

.p-message.p-message-leave-to {
    max-height: 0;
    opacity: 0;
    margin: 0;
}

.p-message-leave-active {
    overflow: hidden;
    transition: max-height 0.45s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin 0.3s;
}

.p-message-leave-active .p-message-close-button {
    opacity: 0;
}

.p-message-sm .p-message-content {
    padding: ${t("message.content.sm.padding")};
}

.p-message-sm .p-message-text {
    font-size: ${t("message.text.sm.font.size")};
}

.p-message-sm .p-message-icon {
    font-size: ${t("message.icon.sm.size")};
    width: ${t("message.icon.sm.size")};
    height: ${t("message.icon.sm.size")};
}

.p-message-sm .p-message-close-icon {
    font-size: ${t("message.close.icon.sm.size")};
    width: ${t("message.close.icon.sm.size")};
    height: ${t("message.close.icon.sm.size")};
}

.p-message-lg .p-message-content {
    padding: ${t("message.content.lg.padding")};
}

.p-message-lg .p-message-text {
    font-size: ${t("message.text.lg.font.size")};
}

.p-message-lg .p-message-icon {
    font-size: ${t("message.icon.lg.size")};
    width: ${t("message.icon.lg.size")};
    height: ${t("message.icon.lg.size")};
}

.p-message-lg .p-message-close-icon {
    font-size: ${t("message.close.icon.lg.size")};
    width: ${t("message.close.icon.lg.size")};
    height: ${t("message.close.icon.lg.size")};
}

.p-message-outlined {
    background: transparent;
    outline-width: ${t("message.outlined.border.width")};
}

.p-message-simple {
    background: transparent;
    outline-color: transparent;
    box-shadow: none;
}

.p-message-simple .p-message-content {
    padding: ${t("message.simple.content.padding")};
}

.p-message-outlined .p-message-close-button:hover,
.p-message-simple .p-message-close-button:hover {
    background: transparent;
}`,Xo={root:({props:t})=>["p-message p-component p-message-"+t.severity,{"p-message-simple":t.variant==="simple"}],content:"p-message-content",icon:"p-message-icon",text:"p-message-text",closeButton:"p-message-close-button",closeIcon:"p-message-close-icon"},Gi=(()=>{class t extends Le{name="message";theme=Jo;classes=Xo;static \u0275fac=(()=>{let e;return function(n){return(e||(e=J(t)))(n||t)}})();static \u0275prov=V({token:t,factory:t.\u0275fac})}return t})();var Yi=(()=>{class t extends ke{severity="info";text;escape=!0;style;styleClass;closable=!1;icon;closeIcon;life;showTransitionOptions="300ms ease-out";hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)";size;variant;onClose=new L;get closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}get containerClass(){let e=this.variant==="outlined"?"p-message-outlined":this.variant==="simple"?"p-message-simple":"",o=this.size==="small"?"p-message-sm":this.size==="large"?"p-message-lg":"";return`p-message-${this.severity} ${e} ${o}`.trim()+(this.styleClass?" "+this.styleClass:"")}visible=ii(!0);_componentStyle=b(Gi);containerTemplate;iconTemplate;closeIconTemplate;templates;_containerTemplate;_iconTemplate;_closeIconTemplate;ngOnInit(){super.ngOnInit(),this.life&&setTimeout(()=>{this.visible.set(!1)},this.life)}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"container":this._containerTemplate=e.template;break;case"icon":this._iconTemplate=e.template;break;case"closeicon":this._closeIconTemplate=e.template;break}})}close(e){this.visible.set(!1),this.onClose.emit({originalEvent:e})}static \u0275fac=(()=>{let e;return function(n){return(e||(e=J(t)))(n||t)}})();static \u0275cmp=E({type:t,selectors:[["p-message"]],contentQueries:function(o,n,c){if(o&1&&(O(c,Oo,4),O(c,Po,4),O(c,Mo,4),O(c,U,4)),o&2){let f;x(f=S())&&(n.containerTemplate=f.first),x(f=S())&&(n.iconTemplate=f.first),x(f=S())&&(n.closeIconTemplate=f.first),x(f=S())&&(n.templates=f)}},inputs:{severity:"severity",text:"text",escape:[2,"escape","escape",z],style:"style",styleClass:"styleClass",closable:[2,"closable","closable",z],icon:"icon",closeIcon:"closeIcon",life:"life",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",size:"size",variant:"variant"},outputs:{onClose:"onClose"},features:[P([Gi]),de],ngContentSelectors:Do,decls:1,vars:1,consts:[["escapeOut",""],[1,"p-message","p-component",3,"ngClass"],[1,"p-message-content"],[1,"p-message-icon",3,"ngClass"],[4,"ngIf","ngIfElse"],[3,"ngClass"],["pRipple","","type","button",1,"p-message-close-button"],[4,"ngTemplateOutlet"],[3,"ngClass","innerHTML",4,"ngIf"],[3,"ngClass","innerHTML"],[3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["pRipple","","type","button",1,"p-message-close-button",3,"click"],[1,"p-message-close-icon",3,"ngClass"],["styleClass","p-message-close-icon"]],template:function(o,n){o&1&&(ri(),d(0,Zo,10,15,"div",1)),o&2&&N(n.visible()?0:-1)},dependencies:[D,ie,M,Oe,Tt,yi,De],encapsulation:2,data:{animation:[_i("messageAnimation",[At(":enter",[Bt({opacity:0,transform:"translateY(-25%)"}),Rt("{{showTransitionParams}}")]),At(":leave",[Rt("{{hideTransitionParams}}",Bt({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0})}return t})();var en=["content"],tn=(t,i)=>({"p-progressbar p-component":!0,"p-progressbar-determinate":t,"p-progressbar-indeterminate":i}),on=t=>({$implicit:t});function nn(t,i){if(t&1&&(a(0,"div"),p(1),r()),t&2){let e=m(2);Te("display",e.value!=null&&e.value!==0?"flex":"none"),y("data-pc-section","label"),l(),Ie("",e.value,"",e.unit,"")}}function rn(t,i){t&1&&H(0)}function an(t,i){if(t&1&&(a(0,"div",3)(1,"div",4),d(2,nn,2,5,"div",5)(3,rn,1,0,"ng-container",6),r()()),t&2){let e=m();X(e.valueStyleClass),Te("width",e.value+"%")("background",e.color),s("ngClass","p-progressbar-value p-progressbar-value-animate"),y("data-pc-section","value"),l(2),s("ngIf",e.showValue&&!e.contentTemplate&&!e._contentTemplate),l(),s("ngTemplateOutlet",e.contentTemplate||e._contentTemplate)("ngTemplateOutletContext",ye(11,on,e.value))}}function ln(t,i){if(t&1&&(a(0,"div",7),u(1,"div",8),r()),t&2){let e=m();X(e.valueStyleClass),s("ngClass","p-progressbar-indeterminate-container"),y("data-pc-section","container"),l(),Te("background",e.color),y("data-pc-section","value")}}var sn=({dt:t})=>`
.p-progressbar {
    position: relative;
    overflow: hidden;
    height: ${t("progressbar.height")};
    background: ${t("progressbar.background")};
    border-radius: ${t("progressbar.border.radius")};
}

.p-progressbar-value {
    margin: 0;
    background: ${t("progressbar.value.background")};
}

.p-progressbar-label {
    color: ${t("progressbar.label.color")};
    font-size: ${t("progressbar.label.font.size")};
    font-weight: ${t("progressbar.label.font.weight")};
}

.p-progressbar-determinate .p-progressbar-value {
    height: 100%;
    width: 0%;
    position: absolute;
    display: none;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    transition: width 1s ease-in-out;
}

.p-progressbar-determinate .p-progressbar-label {
    display: inline-flex;
}

.p-progressbar-indeterminate .p-progressbar-value::before {
    content: "";
    position: absolute;
    background: inherit;
    top: 0;
    inset-inline-start: 0;
    bottom: 0;
    will-change: inset-inline-start, inset-inline-end;
    animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
}

.p-progressbar-indeterminate .p-progressbar-value::after {
    content: "";
    position: absolute;
    background: inherit;
    top: 0;
    inset-inline-start: 0;
    bottom: 0;
    will-change: inset-inline-start, inset-inline-end;
    animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
    animation-delay: 1.15s;
}

@-webkit-keyframes p-progressbar-indeterminate-anim {
    0% {
        inset-inline-start: -35%;
        inset-inline-end: 100%;
    }
    60% {
        inset-inline-start: 100%;
        inset-inline-end: -90%;
    }
    100% {
        inset-inline-start: 100%;
        inset-inline-end: -90%;
    }
}
@keyframes p-progressbar-indeterminate-anim {
    0% {
        inset-inline-start: -35%;
        inset-inline-end: 100%;
    }
    60% {
        inset-inline-start: 100%;
        inset-inline-end: -90%;
    }
    100% {
        inset-inline-start: 100%;
        inset-inline-end: -90%;
    }
}
@-webkit-keyframes p-progressbar-indeterminate-anim-short {
    0% {
        inset-inline-start: -200%;
        inset-inline-end: 100%;
    }
    60% {
        inset-inline-start: 107%;
        inset-inline-end: -8%;
    }
    100% {
        inset-inline-start: 107%;
        inset-inline-end: -8%;
    }
}
@keyframes p-progressbar-indeterminate-anim-short {
    0% {
        inset-inline-start: -200%;
        inset-inline-end: 100%;
    }
    60% {
        inset-inline-start: 107%;
        inset-inline-end: -8%;
    }
    100% {
        inset-inline-start: 107%;
        inset-inline-end: -8%;
    }
}
`,pn={root:({instance:t})=>["p-progressbar p-component",{"p-progressbar-determinate":t.determinate,"p-progressbar-indeterminate":t.indeterminate}],value:"p-progressbar-value",label:"p-progressbar-label"},Zi=(()=>{class t extends Le{name="progressbar";theme=sn;classes=pn;static \u0275fac=(()=>{let e;return function(n){return(e||(e=J(t)))(n||t)}})();static \u0275prov=V({token:t,factory:t.\u0275fac})}return t})();var Ji=(()=>{class t extends ke{value;showValue=!0;styleClass;valueStyleClass;style;unit="%";mode="determinate";color;contentTemplate;_componentStyle=b(Zi);templates;_contentTemplate;ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this._contentTemplate=e.template;break;default:this._contentTemplate=e.template}})}static \u0275fac=(()=>{let e;return function(n){return(e||(e=J(t)))(n||t)}})();static \u0275cmp=E({type:t,selectors:[["p-progressBar"],["p-progressbar"],["p-progress-bar"]],contentQueries:function(o,n,c){if(o&1&&(O(c,en,4),O(c,U,4)),o&2){let f;x(f=S())&&(n.contentTemplate=f.first),x(f=S())&&(n.templates=f)}},inputs:{value:[2,"value","value",we],showValue:[2,"showValue","showValue",z],styleClass:"styleClass",valueStyleClass:"valueStyleClass",style:"style",unit:"unit",mode:"mode",color:"color"},features:[P([Zi]),de],decls:3,vars:15,consts:[["role","progressbar",3,"ngStyle","ngClass"],["style","display:flex",3,"ngClass","class","width","background",4,"ngIf"],[3,"ngClass","class",4,"ngIf"],[2,"display","flex",3,"ngClass"],[1,"p-progressbar-label"],[3,"display",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(o,n){o&1&&(a(0,"div",0),d(1,an,4,13,"div",1)(2,ln,2,7,"div",2),r()),o&2&&(X(n.styleClass),s("ngStyle",n.style)("ngClass",Fe(12,tn,n.mode==="determinate",n.mode==="indeterminate")),y("aria-valuemin",0)("aria-valuenow",n.value)("aria-valuemax",100)("data-pc-name","progressbar")("data-pc-section","root")("aria-label",n.value+n.unit),l(),s("ngIf",n.mode==="determinate"),l(),s("ngIf",n.mode==="indeterminate"))},dependencies:[D,ie,M,Oe,yt,De],encapsulation:2,changeDetection:0})}return t})();var cn=["file"],mn=["header"],Xi=["content"],dn=["toolbar"],un=["chooseicon"],fn=["filelabel"],_n=["uploadicon"],gn=["cancelicon"],hn=["empty"],bn=["advancedfileinput"],vn=["basicfileinput"],Cn=(t,i,e,o,n)=>({$implicit:t,uploadedFiles:i,chooseCallback:e,clearCallback:o,uploadCallback:n}),yn=(t,i,e,o,n,c,f,me)=>({$implicit:t,uploadedFiles:i,chooseCallback:e,clearCallback:o,removeUploadedFileCallback:n,removeFileCallback:c,progress:f,messages:me}),xn=t=>({$implicit:t});function Sn(t,i){if(t&1&&u(0,"span"),t&2){let e=m(3);X(e.chooseIcon),y("aria-label",!0)("data-pc-section","chooseicon")}}function Tn(t,i){t&1&&u(0,"PlusIcon"),t&2&&y("aria-label",!0)("data-pc-section","chooseicon")}function In(t,i){}function Fn(t,i){t&1&&d(0,In,0,0,"ng-template")}function wn(t,i){if(t&1&&(a(0,"span"),d(1,Fn,1,0,null,11),r()),t&2){let e=m(4);y("aria-label",!0)("data-pc-section","chooseicon"),l(),s("ngTemplateOutlet",e.chooseIconTemplate||e._chooseIconTemplate)}}function En(t,i){if(t&1&&(le(0),d(1,Tn,1,2,"PlusIcon",9)(2,wn,2,3,"span",9),se()),t&2){let e=m(3);l(),s("ngIf",!e.chooseIconTemplate&&!e._chooseIconTemplate),l(),s("ngIf",e.chooseIconTemplate||e._chooseIconTemplate)}}function On(t,i){if(t&1&&u(0,"span",21),t&2){let e=m(4);s("ngClass",e.uploadIcon),y("aria-hidden",!0)}}function Pn(t,i){t&1&&u(0,"UploadIcon")}function Mn(t,i){}function Dn(t,i){t&1&&d(0,Mn,0,0,"ng-template")}function Ln(t,i){if(t&1&&(a(0,"span"),d(1,Dn,1,0,null,11),r()),t&2){let e=m(5);y("aria-hidden",!0),l(),s("ngTemplateOutlet",e.uploadIconTemplate||e._uploadIconTemplate)}}function kn(t,i){if(t&1&&(le(0),d(1,Pn,1,0,"UploadIcon",9)(2,Ln,2,2,"span",9),se()),t&2){let e=m(4);l(),s("ngIf",!e.uploadIconTemplate&&!e._uploadIconTemplate),l(),s("ngIf",e.uploadIconTemplate||e._uploadIconTemplate)}}function Vn(t,i){if(t&1){let e=v();a(0,"p-button",19),h("onClick",function(){_(e);let n=m(3);return g(n.upload())}),d(1,On,1,2,"span",20)(2,kn,3,2,"ng-container",9),r()}if(t&2){let e=m(3);s("label",e.uploadButtonLabel)("disabled",!e.hasFiles()||e.isFileLimitExceeded())("styleClass","p-fileupload-upload-button "+e.uploadStyleClass)("buttonProps",e.uploadButtonProps),l(),s("ngIf",e.uploadIcon),l(),s("ngIf",!e.uploadIcon)}}function Nn(t,i){if(t&1&&u(0,"span",21),t&2){let e=m(4);s("ngClass",e.cancelIcon)}}function $n(t,i){t&1&&u(0,"TimesIcon"),t&2&&y("aria-hidden",!0)}function Un(t,i){}function Rn(t,i){t&1&&d(0,Un,0,0,"ng-template")}function Bn(t,i){if(t&1&&(a(0,"span"),d(1,Rn,1,0,null,11),r()),t&2){let e=m(5);y("aria-hidden",!0),l(),s("ngTemplateOutlet",e.cancelIconTemplate||e._cancelIconTemplate)}}function An(t,i){if(t&1&&(le(0),d(1,$n,1,1,"TimesIcon",9)(2,Bn,2,2,"span",9),se()),t&2){let e=m(4);l(),s("ngIf",!e.cancelIconTemplate&&!e._cancelIconTemplate),l(),s("ngIf",e.cancelIconTemplate||e._cancelIconTemplate)}}function zn(t,i){if(t&1){let e=v();a(0,"p-button",19),h("onClick",function(){_(e);let n=m(3);return g(n.clear())}),d(1,Nn,1,1,"span",20)(2,An,3,2,"ng-container",9),r()}if(t&2){let e=m(3);s("label",e.cancelButtonLabel)("disabled",!e.hasFiles()||e.uploading)("styleClass","p-fileupload-cancel-button "+e.cancelStyleClass)("buttonProps",e.cancelButtonProps),l(),s("ngIf",e.cancelIcon),l(),s("ngIf",!e.cancelIcon)}}function jn(t,i){if(t&1){let e=v();le(0),a(1,"p-button",16),h("focus",function(){_(e);let n=m(2);return g(n.onFocus())})("blur",function(){_(e);let n=m(2);return g(n.onBlur())})("onClick",function(){_(e);let n=m(2);return g(n.choose())})("keydown.enter",function(){_(e);let n=m(2);return g(n.choose())}),a(2,"input",7,0),h("change",function(n){_(e);let c=m(2);return g(c.onFileSelect(n))}),r(),d(4,Sn,1,4,"span",17)(5,En,3,2,"ng-container",9),r(),d(6,Vn,3,6,"p-button",18)(7,zn,3,6,"p-button",18),se()}if(t&2){let e=m(2);l(),s("styleClass","p-fileupload-choose-button "+e.chooseStyleClass)("disabled",e.disabled||e.isChooseDisabled())("label",e.chooseButtonLabel)("buttonProps",e.chooseButtonProps),y("data-pc-section","choosebutton"),l(),s("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),y("aria-label",e.browseFilesLabel)("title","")("data-pc-section","input"),l(2),s("ngIf",e.chooseIcon),l(),s("ngIf",!e.chooseIcon),l(),s("ngIf",!e.auto&&e.showUploadButton),l(),s("ngIf",!e.auto&&e.showCancelButton)}}function Qn(t,i){t&1&&H(0)}function qn(t,i){t&1&&H(0)}function Hn(t,i){if(t&1&&u(0,"p-progressbar",22),t&2){let e=m(2);s("value",e.progress)("showValue",!1)}}function Gn(t,i){if(t&1&&u(0,"p-message",14),t&2){let e=i.$implicit;s("severity",e.severity)("text",e.text)}}function Wn(t,i){if(t&1){let e=v();a(0,"img",33),h("error",function(n){_(e);let c=m(5);return g(c.imageError(n))}),r()}if(t&2){let e=m().$implicit,o=m(4);s("src",e.objectURL,ni)("width",o.previewWidth)}}function Kn(t,i){t&1&&u(0,"TimesIcon")}function Yn(t,i){}function Zn(t,i){t&1&&d(0,Yn,0,0,"ng-template")}function Jn(t,i){if(t&1&&d(0,Kn,1,0,"TimesIcon",9)(1,Zn,1,0,null,11),t&2){let e=m(5);s("ngIf",!e.cancelIconTemplate&&!e._cancelIconTemplate),l(),s("ngTemplateOutlet",e.cancelIconTemplate||e._cancelIconTemplate)}}function Xn(t,i){if(t&1){let e=v();a(0,"div",24),d(1,Wn,1,2,"img",27),a(2,"div",28)(3,"div",29),p(4),r(),a(5,"span",30),p(6),r()(),a(7,"div",31)(8,"p-button",32),h("onClick",function(n){let c=_(e).index,f=m(4);return g(f.remove(n,c))}),d(9,Jn,2,2,"ng-template",null,2,k),r()()()}if(t&2){let e=i.$implicit,o=m(4);l(),s("ngIf",o.isImage(e)),l(3),C(e.name),l(2),C(o.formatSize(e.size)),l(2),s("disabled",o.uploading)("styleClass","p-fileupload-file-remove-button "+o.removeStyleClass)}}function er(t,i){if(t&1&&d(0,Xn,11,5,"div",26),t&2){let e=m(3);s("ngForOf",e.files)}}function tr(t,i){}function ir(t,i){if(t&1&&d(0,tr,0,0,"ng-template",25),t&2){let e=m(3);s("ngForOf",e.files)("ngForTemplate",e.fileTemplate||e._fileTemplate)}}function or(t,i){if(t&1&&(a(0,"div",23),d(1,er,1,1,"div",24)(2,ir,1,2,null,25),r()),t&2){let e=m(2);l(),N(!e.fileTemplate&&!e._fileTemplate?1:-1),l(),N(e.fileTemplate||e._fileTemplate?2:-1)}}function nr(t,i){t&1&&H(0)}function rr(t,i){t&1&&H(0)}function ar(t,i){if(t&1&&d(0,rr,1,0,"ng-container",11),t&2){let e=m(2);s("ngTemplateOutlet",e.emptyTemplate||e._emptyTemplate)}}function lr(t,i){if(t&1){let e=v();a(0,"div",6)(1,"input",7,0),h("change",function(n){_(e);let c=m();return g(c.onFileSelect(n))}),r(),a(3,"div",8),d(4,jn,8,15,"ng-container",9)(5,Qn,1,0,"ng-container",10)(6,qn,1,0,"ng-container",11),r(),a(7,"div",12,1),h("dragenter",function(n){_(e);let c=m();return g(c.onDragEnter(n))})("dragleave",function(n){_(e);let c=m();return g(c.onDragLeave(n))})("drop",function(n){_(e);let c=m();return g(c.onDrop(n))}),d(9,Hn,1,2,"p-progressbar",13),Nt(10,Gn,1,2,"p-message",14,Vt),d(12,or,3,2,"div",15)(13,nr,1,0,"ng-container",10)(14,ar,1,1,"ng-container"),r()()}if(t&2){let e=m();X(e.styleClass),s("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",e.style),y("data-pc-name","fileupload")("data-pc-section","root"),l(),Te("display","none"),s("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),y("aria-label",e.browseFilesLabel)("title","")("data-pc-section","input"),l(3),s("ngIf",!e.headerTemplate&&!e._headerTemplate),l(),s("ngTemplateOutlet",e.headerTemplate||e._headerTemplate)("ngTemplateOutletContext",ci(24,Cn,e.files,e.uploadedFiles,e.choose.bind(e),e.clear.bind(e),e.upload.bind(e))),l(),s("ngTemplateOutlet",e.toolbarTemplate||e._toolbarTemplate),l(),y("data-pc-section","content"),l(2),s("ngIf",e.hasFiles()),l(),$t(e.msgs),l(2),s("ngIf",e.hasFiles()),l(),s("ngTemplateOutlet",e.contentTemplate||e._contentTemplate)("ngTemplateOutletContext",mi(30,yn,e.files,e.uploadedFiles,e.choose.bind(e),e.clear.bind(e),e.removeUploadedFile.bind(e),e.remove.bind(e),e.progress,e.msgs)),l(),N((e.emptyTemplate||e._emptyTemplate)&&!e.hasFiles()&&!e.hasUploadedFiles()?14:-1)}}function sr(t,i){if(t&1&&u(0,"p-message",14),t&2){let e=i.$implicit;s("severity",e.severity)("text",e.text)}}function pr(t,i){if(t&1&&u(0,"span",37),t&2){let e=m(4);s("ngClass",e.uploadIcon)}}function cr(t,i){t&1&&u(0,"UploadIcon",40),t&2&&s("styleClass","p-button-icon p-button-icon-left")}function mr(t,i){}function dr(t,i){t&1&&d(0,mr,0,0,"ng-template")}function ur(t,i){if(t&1&&(a(0,"span",41),d(1,dr,1,0,null,11),r()),t&2){let e=m(5);l(),s("ngTemplateOutlet",e._uploadIconTemplate||e.uploadIconTemplate)}}function fr(t,i){if(t&1&&(le(0),d(1,cr,1,1,"UploadIcon",38)(2,ur,2,1,"span",39),se()),t&2){let e=m(4);l(),s("ngIf",!e.uploadIconTemplate&&!e._uploadIconTemplate),l(),s("ngIf",e._uploadIconTemplate||e.uploadIconTemplate)}}function _r(t,i){if(t&1&&d(0,pr,1,1,"span",36)(1,fr,3,2,"ng-container",9),t&2){let e=m(3);s("ngIf",e.uploadIcon),l(),s("ngIf",!e.uploadIcon)}}function gr(t,i){if(t&1&&u(0,"span",43),t&2){let e=m(4);s("ngClass",e.chooseIcon)}}function hr(t,i){t&1&&u(0,"PlusIcon"),t&2&&y("data-pc-section","uploadicon")}function br(t,i){}function vr(t,i){t&1&&d(0,br,0,0,"ng-template")}function Cr(t,i){if(t&1&&(le(0),d(1,hr,1,1,"PlusIcon",9)(2,vr,1,0,null,11),se()),t&2){let e=m(4);l(),s("ngIf",!e.chooseIconTemplate&&!e._chooseIconTemplate),l(),s("ngTemplateOutlet",e.chooseIconTemplate||e._chooseIconTemplate)}}function yr(t,i){if(t&1&&d(0,gr,1,1,"span",42)(1,Cr,3,2,"ng-container",9),t&2){let e=m(3);s("ngIf",e.chooseIcon),l(),s("ngIf",!e.chooseIcon)}}function xr(t,i){if(t&1&&d(0,_r,2,2)(1,yr,2,2),t&2){let e=m(2);N(e.hasFiles()&&!e.auto?0:1)}}function Sr(t,i){if(t&1&&(a(0,"span"),p(1),r()),t&2){let e=m(3);X(e.cx("filelabel")),l(),w(" ",e.basicFileChosenLabel()," ")}}function Tr(t,i){t&1&&H(0)}function Ir(t,i){if(t&1&&d(0,Tr,1,0,"ng-container",10),t&2){let e=m(3);s("ngTemplateOutlet",e.fileLabelTemplate||e._fileLabelTemplate)("ngTemplateOutletContext",ye(2,xn,e.files))}}function Fr(t,i){if(t&1&&d(0,Sr,2,3,"span",44)(1,Ir,1,4,"ng-container"),t&2){let e=m(2);N(!e.fileLabelTemplate&&!e._fileLabelTemplate?0:1)}}function wr(t,i){if(t&1){let e=v();a(0,"div",21),Nt(1,sr,1,2,"p-message",14,Vt),a(3,"p-button",34),h("onClick",function(){_(e);let n=m();return g(n.onBasicUploaderClick())})("keydown",function(n){_(e);let c=m();return g(c.onBasicKeydown(n))}),d(4,xr,2,1,"ng-template",null,2,k),a(6,"input",35,3),h("change",function(n){_(e);let c=m();return g(c.onFileSelect(n))})("focus",function(){_(e);let n=m();return g(n.onFocus())})("blur",function(){_(e);let n=m();return g(n.onBlur())}),r()(),d(8,Fr,2,1),r()}if(t&2){let e=m();X(e.styleClass),s("ngClass","p-fileupload p-fileupload-basic p-component"),y("data-pc-name","fileupload"),l(),$t(e.msgs),l(2),Ct(e.style),s("styleClass","p-fileupload-choose-button "+e.chooseStyleClass)("disabled",e.disabled)("label",e.chooseButtonLabel)("buttonProps",e.chooseButtonProps),l(3),s("accept",e.accept)("multiple",e.multiple)("disabled",e.disabled),y("aria-label",e.browseFilesLabel)("data-pc-section","input"),l(2),N(e.auto?-1:8)}}var Er=({dt:t})=>`
.p-fileupload input[type="file"] {
    display: none;
}

.p-fileupload-advanced {
    border: 1px solid ${t("fileupload.border.color")};
    border-radius: ${t("fileupload.border.radius")};
    background: ${t("fileupload.background")};
    color: ${t("fileupload.color")};
}

.p-fileupload-header {
    display: flex;
    align-items: center;
    padding: ${t("fileupload.header.padding")};
    background: ${t("fileupload.header.background")};
    color: ${t("fileupload.header.color")};
    border-style: solid;
    border-width: ${t("fileupload.header.border.width")};
    border-color: ${t("fileupload.header.border.color")};
    border-radius: ${t("fileupload.header.border.radius")};
    gap: ${t("fileupload.header.gap")};
}

.p-fileupload-content {
    border: 1px solid transparent;
    display: flex;
    flex-direction: column;
    gap: ${t("fileupload.content.gap")};
    transition: border-color ${t("fileupload.transition.duration")};
    padding: ${t("fileupload.content.padding")};
}

.p-fileupload-content .p-progressbar {
    width: 100%;
    height: ${t("fileupload.progressbar.height")};
}

.p-fileupload-file-list {
    display: flex;
    flex-direction: column;
    gap: ${t("fileupload.filelist.gap")};
}

.p-fileupload-file {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    padding: ${t("fileupload.file.padding")};
    border-bottom: 1px solid ${t("fileupload.file.border.color")};
    gap: ${t("fileupload.file.gap")};
}

.p-fileupload-file:last-child {
    border-bottom: 0;
}

.p-fileupload-file-info {
    display: flex;
    flex-direction: column;
    gap: ${t("fileupload.file.info.gap")};
}

.p-fileupload-file-thumbnail {
    flex-shrink: 0;
}

.p-fileupload-file-actions {
    margin-left: auto;
}

.p-fileupload-highlight {
    border: 1px dashed ${t("fileupload.content.highlight.border.color")};
}

.p-fileupload-advanced .p-message {
    margin-top: 0;
}

.p-fileupload-basic {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: ${t("fileupload.basic.gap")};
}
`,Or={root:({instance:t})=>`p-fileupload p-fileupload-${t.mode} p-component`,header:"p-fileupload-header",pcChooseButton:"p-fileupload-choose-button",pcUploadButton:"p-fileupload-upload-button",pcCancelButton:"p-fileupload-cancel-button",content:"p-fileupload-content",fileList:"p-fileupload-file-list",file:"p-fileupload-file",fileThumbnail:"p-fileupload-file-thumbnail",fileInfo:"p-fileupload-file-info",fileName:"p-fileupload-file-name",fileSize:"p-fileupload-file-size",pcFileBadge:"p-fileupload-file-badge",fileActions:"p-fileupload-file-actions",pcFileRemoveButton:"p-fileupload-file-remove-button"},eo=(()=>{class t extends Le{name="fileupload";theme=Er;classes=Or;static \u0275fac=(()=>{let e;return function(n){return(e||(e=J(t)))(n||t)}})();static \u0275prov=V({token:t,factory:t.\u0275fac})}return t})();var to=(()=>{class t extends ke{name;url;method="post";multiple;accept;disabled;auto;withCredentials;maxFileSize;invalidFileSizeMessageSummary="{0}: Invalid file size, ";invalidFileSizeMessageDetail="maximum upload size is {0}.";invalidFileTypeMessageSummary="{0}: Invalid file type, ";invalidFileTypeMessageDetail="allowed file types: {0}.";invalidFileLimitMessageDetail="limit is {0} at most.";invalidFileLimitMessageSummary="Maximum number of files exceeded, ";style;styleClass;previewWidth=50;chooseLabel;uploadLabel;cancelLabel;chooseIcon;uploadIcon;cancelIcon;showUploadButton=!0;showCancelButton=!0;mode="advanced";headers;customUpload;fileLimit;uploadStyleClass;cancelStyleClass;removeStyleClass;chooseStyleClass;chooseButtonProps;uploadButtonProps={severity:"secondary"};cancelButtonProps={severity:"secondary"};onBeforeUpload=new L;onSend=new L;onUpload=new L;onError=new L;onClear=new L;onRemove=new L;onSelect=new L;onProgress=new L;uploadHandler=new L;onImageError=new L;onRemoveUploadedFile=new L;fileTemplate;headerTemplate;contentTemplate;toolbarTemplate;chooseIconTemplate;fileLabelTemplate;uploadIconTemplate;cancelIconTemplate;emptyTemplate;advancedFileInput;basicFileInput;content;set files(e){this._files=[];for(let o=0;o<e.length;o++){let n=e[o];this.validate(n)&&(this.isImage(n)&&(n.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[o]))),this._files.push(e[o]))}}get files(){return this._files}get basicButtonLabel(){return this.auto||!this.hasFiles()?this.chooseLabel:this.uploadLabel??this.files[0].name}_files=[];progress=0;dragHighlight;msgs;uploadedFileCount=0;focus;uploading;duplicateIEEvent;translationSubscription;dragOverListener;uploadedFiles=[];sanitizer=b(fi);zone=b(ti);http=b(G);_componentStyle=b(eo);ngOnInit(){super.ngOnInit(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){super.ngAfterViewInit(),Ut(this.platformId)&&this.mode==="advanced"&&this.zone.runOutsideAngular(()=>{this.content&&(this.dragOverListener=this.renderer.listen(this.content.nativeElement,"dragover",this.onDragOver.bind(this)))})}_headerTemplate;_contentTemplate;_toolbarTemplate;_chooseIconTemplate;_uploadIconTemplate;_cancelIconTemplate;_emptyTemplate;_fileTemplate;_fileLabelTemplate;templates;ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this._headerTemplate=e.template;break;case"file":this._fileTemplate=e.template;break;case"content":this._contentTemplate=e.template;break;case"toolbar":this._toolbarTemplate=e.template;break;case"chooseicon":this._chooseIconTemplate=e.template;break;case"uploadicon":this._uploadIconTemplate=e.template;break;case"cancelicon":this._cancelIconTemplate=e.template;break;case"empty":this._emptyTemplate=e.template;break;case"filelabel":this._fileLabelTemplate=e.template;break;default:this._fileTemplate=e.template;break}})}basicFileChosenLabel(){return this.auto?this.chooseButtonLabel:this.hasFiles()?this.files&&this.files.length===1?this.files[0].name:this.config.getTranslation("fileChosenMessage")?.replace("{0}",this.files.length):this.config.getTranslation("noFileChosenMessage")||""}getTranslation(e){return this.config.getTranslation(e)}choose(){this.advancedFileInput?.nativeElement.click()}onFileSelect(e){if(e.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.msgs=[],this.multiple||(this.files=[]);let o=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let n=0;n<o.length;n++){let c=o[n];this.isFileSelected(c)||this.validate(c)&&(this.isImage(c)&&(c.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(o[n]))),this.files.push(o[n]))}this.onSelect.emit({originalEvent:e,files:o,currentFiles:this.files}),this.checkFileLimit(o),this.hasFiles()&&this.auto&&(this.mode!=="advanced"||!this.isFileLimitExceeded())&&this.upload(),e.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(e){for(let o of this.files)if(o.name+o.type+o.size===e.name+e.type+e.size)return!0;return!1}isIE11(){if(Ut(this.platformId))return!!this.document.defaultView.MSInputMethodContext&&!!this.document.documentMode}validate(e){if(this.msgs=this.msgs||[],this.accept&&!this.isFileTypeValid(e)){let o=`${this.invalidFileTypeMessageSummary.replace("{0}",e.name)} ${this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}`;return this.msgs.push({severity:"error",text:o}),!1}if(this.maxFileSize&&e.size>this.maxFileSize){let o=`${this.invalidFileSizeMessageSummary.replace("{0}",e.name)} ${this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}`;return this.msgs.push({severity:"error",text:o}),!1}return!0}isFileTypeValid(e){let o=this.accept?.split(",").map(n=>n.trim());for(let n of o)if(this.isWildcard(n)?this.getTypeClass(e.type)===this.getTypeClass(n):e.type==n||this.getFileExtension(e).toLowerCase()===n.toLowerCase())return!0;return!1}getTypeClass(e){return e.substring(0,e.indexOf("/"))}isWildcard(e){return e.indexOf("*")!==-1}getFileExtension(e){return"."+e.name.split(".").pop()}isImage(e){return/^image\//.test(e.type)}onImageLoad(e){window.URL.revokeObjectURL(e.src)}uploader(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let e=new FormData;this.onBeforeUpload.emit({formData:e});for(let o=0;o<this.files.length;o++)e.append(this.name,this.files[o],this.files[o].name);this.http.request(this.method,this.url,{body:e,headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(o=>{switch(o.type){case xt.Sent:this.onSend.emit({originalEvent:o,formData:e});break;case xt.Response:this.uploading=!1,this.progress=0,o.status>=200&&o.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:o,files:this.files})):this.onError.emit({files:this.files}),this.uploadedFiles.push(...this.files),this.clear();break;case xt.UploadProgress:{o.loaded&&(this.progress=Math.round(o.loaded*100/o.total)),this.onProgress.emit({originalEvent:o,progress:this.progress});break}}this.cd.markForCheck()},o=>{this.uploading=!1,this.onError.emit({files:this.files,error:o})})}}clear(){this.files=[],this.uploadedFileCount=0,this.onClear.emit(),this.clearInputElement(),this.msgs=[],this.cd.markForCheck()}remove(e,o){this.clearInputElement(),this.onRemove.emit({originalEvent:e,file:this.files[o]}),this.files.splice(o,1),this.checkFileLimit(this.files)}removeUploadedFile(e){let o=this.uploadedFiles.splice(e,1)[0];this.uploadedFiles=[...this.uploadedFiles],this.onRemoveUploadedFile.emit({file:o,files:this.uploadedFiles})}isFileLimitExceeded(){let o=this.auto?this.files.length:this.files.length+this.uploadedFileCount;return this.fileLimit&&this.fileLimit<=o&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<o}isChooseDisabled(){return this.auto?this.fileLimit&&this.fileLimit<=this.files.length:this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(e){this.msgs??=[];let o=this.msgs.length>0&&this.fileLimit&&this.fileLimit<e.length;if(this.isFileLimitExceeded()||o){let n=`${this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString())} ${this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())}`;this.msgs.push({severity:"error",text:n})}else this.msgs=this.msgs.filter(n=>!n.text.includes(this.invalidFileLimitMessageSummary))}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}hasUploadedFiles(){return this.uploadedFiles&&this.uploadedFiles.length>0}onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())}onDragOver(e){this.disabled||(hi(this.content?.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.disabled||zt(this.content?.nativeElement,"p-fileupload-highlight")}onDrop(e){if(!this.disabled){zt(this.content?.nativeElement,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();let o=e.dataTransfer?e.dataTransfer.files:e.target.files;(this.multiple||o&&o.length===1)&&this.onFileSelect(e)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(e){let c=this.getTranslation(_e.FILE_SIZE_TYPES);if(e===0)return`0 ${c[0]}`;let f=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,f)).toFixed(3)} ${c[f]}`}upload(){this.hasFiles()&&this.uploader()}onBasicUploaderClick(){this.basicFileInput?.nativeElement.click()}onBasicKeydown(e){switch(e.code){case"Space":case"Enter":this.onBasicUploaderClick(),e.preventDefault();break}}imageError(e){this.onImageError.emit(e)}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation(_e.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation(_e.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation(_e.CANCEL)}get browseFilesLabel(){return this.config.getTranslation(_e.ARIA)[_e.BROWSE_FILES]}get pendingLabel(){return this.config.getTranslation(_e.PENDING)}ngOnDestroy(){this.content&&this.content.nativeElement&&this.dragOverListener&&(this.dragOverListener(),this.dragOverListener=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),super.ngOnDestroy()}static \u0275fac=(()=>{let e;return function(n){return(e||(e=J(t)))(n||t)}})();static \u0275cmp=E({type:t,selectors:[["p-fileupload"],["p-fileUpload"]],contentQueries:function(o,n,c){if(o&1&&(O(c,cn,4),O(c,mn,4),O(c,Xi,4),O(c,dn,4),O(c,un,4),O(c,fn,4),O(c,_n,4),O(c,gn,4),O(c,hn,4),O(c,U,4)),o&2){let f;x(f=S())&&(n.fileTemplate=f.first),x(f=S())&&(n.headerTemplate=f.first),x(f=S())&&(n.contentTemplate=f.first),x(f=S())&&(n.toolbarTemplate=f.first),x(f=S())&&(n.chooseIconTemplate=f.first),x(f=S())&&(n.fileLabelTemplate=f.first),x(f=S())&&(n.uploadIconTemplate=f.first),x(f=S())&&(n.cancelIconTemplate=f.first),x(f=S())&&(n.emptyTemplate=f.first),x(f=S())&&(n.templates=f)}},viewQuery:function(o,n){if(o&1&&(te(bn,5),te(vn,5),te(Xi,5)),o&2){let c;x(c=S())&&(n.advancedFileInput=c.first),x(c=S())&&(n.basicFileInput=c.first),x(c=S())&&(n.content=c.first)}},inputs:{name:"name",url:"url",method:"method",multiple:[2,"multiple","multiple",z],accept:"accept",disabled:[2,"disabled","disabled",z],auto:[2,"auto","auto",z],withCredentials:[2,"withCredentials","withCredentials",z],maxFileSize:[2,"maxFileSize","maxFileSize",we],invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:[2,"previewWidth","previewWidth",we],chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:[2,"showUploadButton","showUploadButton",z],showCancelButton:[2,"showCancelButton","showCancelButton",z],mode:"mode",headers:"headers",customUpload:[2,"customUpload","customUpload",z],fileLimit:[2,"fileLimit","fileLimit",e=>we(e,null)],uploadStyleClass:"uploadStyleClass",cancelStyleClass:"cancelStyleClass",removeStyleClass:"removeStyleClass",chooseStyleClass:"chooseStyleClass",chooseButtonProps:"chooseButtonProps",uploadButtonProps:"uploadButtonProps",cancelButtonProps:"cancelButtonProps",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler",onImageError:"onImageError",onRemoveUploadedFile:"onRemoveUploadedFile"},features:[P([eo]),de],decls:2,vars:2,consts:[["advancedfileinput",""],["content",""],["icon",""],["basicfileinput",""],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"ngClass","class",4,"ngIf"],[3,"ngClass","ngStyle"],["type","file",3,"change","multiple","accept","disabled"],[1,"p-fileupload-header"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],[3,"value","showValue",4,"ngIf"],[3,"severity","text"],["class","p-fileupload-file-list",4,"ngIf"],[3,"focus","blur","onClick","keydown.enter","styleClass","disabled","label","buttonProps"],[3,"class",4,"ngIf"],[3,"label","disabled","styleClass","buttonProps","onClick",4,"ngIf"],[3,"onClick","label","disabled","styleClass","buttonProps"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"value","showValue"],[1,"p-fileupload-file-list"],[1,"p-fileupload-file"],["ngFor","",3,"ngForOf","ngForTemplate"],["class","p-fileupload-file",4,"ngFor","ngForOf"],["class","p-fileupload-file-thumbnail",3,"src","width","error",4,"ngIf"],[1,"p-fileupload-file-info"],[1,"p-fileupload-file-name"],[1,"p-fileupload-file-size"],[1,"p-fileupload-file-actions"],["text","","rounded","","severity","danger",3,"onClick","disabled","styleClass"],[1,"p-fileupload-file-thumbnail",3,"error","src","width"],[3,"onClick","keydown","styleClass","disabled","label","buttonProps"],["type","file",3,"change","focus","blur","accept","multiple","disabled"],["class","p-button-icon p-button-icon-left",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left",3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-button-icon p-button-icon-left",4,"ngIf"],[3,"styleClass"],[1,"p-button-icon","p-button-icon-left"],["class","p-button-icon p-button-icon-left pi",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],[3,"class"]],template:function(o,n){o&1&&d(0,lr,15,39,"div",4)(1,wr,9,16,"div",5),o&2&&(s("ngIf",n.mode==="advanced"),l(),s("ngIf",n.mode==="basic"))},dependencies:[D,ie,oe,M,Oe,yt,ge,Ji,Yi,Ci,$i,Tt,De],encapsulation:2,changeDetection:0})}return t})();var Pr=(t,i)=>({"text-red-500":t,"text-green-600":i});function Mr(t,i){if(t&1&&p(0),t&2){let e=i.$implicit;Ie(" ",e.code," - ",e.name," ")}}function Dr(t,i){if(t&1&&(a(0,"div",25)(1,"label",26),p(2),r(),u(3,"p-inputNumber",27),r()),t&2){let e,o=i.$implicit,n=i.index,c=m();s("formGroupName",n),l(2),w(" ",c.getCecoLabel((e=o.get("cecoId"))==null?null:e.value)," "),l(),s("min",0)("max",100)}}function Lr(t,i){t&1&&(a(0,"span"),p(1," (Debe sumar 100%)"),r())}var bt=class t{constructor(i,e,o,n){this.fb=i;this.route=e;this.router=o;this.messageService=n;this.route.paramMap.subscribe(c=>{let f=c.get("id");f?(this.editMode=!0,this.orderId=+f,this.purchaseOrderStore.loadPurchaseOrder({id:f}),Ee(()=>{let me=this.purchaseOrderStore.purchaseOrder();me&&!this.loadedOnce&&(this.loadedOnce=!0,this.patchPurchaseOrder(me))})):this.editMode=!1})}formData=null;submitted=new L;cancelled=new L;suppliersStore=b($);costCenterStore=b(qt);purchaseOrderStore=b(ce);companyStore=b(Se);filteredProducts=[];form;editMode=!1;orderId=null;selectedFile;statusOptions=Object.values(jt);loadedOnce=!1;ngOnInit(){this.suppliersStore.loadAllSuppliers(),this.costCenterStore.loadCostCentersFormOrder(),this.buildForm(),this.editMode||(this.form.get("status")?.disable(),this.form.patchValue({status:"Solicitada"})),this.form.get("receptionDate")?.valueChanges.subscribe(i=>{if(i){let e=new Date;e.setHours(0,0,0,0);let o=new Date(i);o.setHours(0,0,0,0);let n=o.getTime()-e.getTime(),c=Math.max(Math.ceil(n/(1e3*60*60*24)),0);this.form.get("deliveryDays")?.setValue(c,{emitEvent:!1})}else this.form.get("deliveryDays")?.setValue(0,{emitEvent:!1})}),this.form.get("cecoIds")?.valueChanges.subscribe(i=>{let e=this.form.get("cecos");e.clear(),i.forEach(o=>{e.push(this.fb.group({cecoId:[o],cecoName:this.getCecoLabel(o),participation:[0,[T.required,T.min(0),T.max(100)]]}))})})}buildForm(){this.form=this.fb.group({companyId:[this.companyStore.company()?.id??null,T.required],companyName:[this.companyStore.company()?.companyName??null,T.required],supplierId:[null,T.required],receptionDate:[null,T.required],dueDate:[null,T.required],deliveryDays:[null,[T.required,T.min(0)]],cecoIds:[[]],cecos:this.fb.array([]),participation:[null,[T.required,T.min(0),T.max(100)]],status:["Solicitada",T.required],items:this.fb.array([])})}patchPurchaseOrder(i){i.receptionDate=i.receptionDate?new Date(i.receptionDate):null,i.dueDate=i.dueDate?new Date(i.dueDate):null,this.form.patchValue(Xt(Jt({},i),{cecoIds:i.cecos?.map(e=>e.cecoId)||[]})),this.loadCecosPurchaseOrder(i.cecos),this.setItems(i.items||[])}get itemsFormArray(){return this.form.get("items")}get cecosFormArray(){return this.form.get("cecos")}setItems(i){this.itemsFormArray.clear(),i.forEach(e=>{this.itemsFormArray.push(this.fb.group({productId:[e.productId],name:[e.name],unit:[e.unit],quantity:[e.quantity],unitPrice:[e.unitPrice??null],observations:[e.observations||""]}))})}loadCecosPurchaseOrder(i){let e=this.form.get("cecos");e.clear(),i?.forEach(o=>{e.push(this.fb.group({cecoId:[o.cecoId],cecoName:this.getCecoLabel(o.cecoId),participation:[o.participation]}))})}onSubmit(){let i=this.form.getRawValue();this.editMode&&this.orderId!==null?this.purchaseOrderStore.updatePurchaseOrder({id:this.orderId,purchaseOrder:i}):this.purchaseOrderStore.addPurchaseOrder(i)}cancel(){this.router.navigate(["/purchases/orders"])}onUpload(i){this.messageService.add({severity:"info",summary:"Success",detail:"File Uploaded with Basic Mode"})}getCecoLabel(i){let e=this.costCenterStore.costCenters().find(o=>o.id===i);return e?e.name:i}get totalParticipation(){return this.form.get("cecos").controls.reduce((e,o)=>e+(o.get("participation")?.value||0),0)}static \u0275fac=function(e){return new(e||t)(F(Be),F(St),F(fe),F(I))};static \u0275cmp=E({type:t,selectors:[["app-purchase-form"]],inputs:{formData:"formData"},outputs:{submitted:"submitted",cancelled:"cancelled"},features:[P([qt,$,ce,I])],decls:59,vars:14,consts:[["fu",""],[1,"card","flex","flex-col","gap-6","w-full"],[1,"text-2xl","font-semibold","mb-6"],[1,"p-6","space-y-6",3,"ngSubmit","formGroup"],[1,"text-lg","font-semibold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","mb-4","gap-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["pInputText","","formControlName","companyName","readonly","",1,"w-full"],["formControlName","supplierId","optionLabel","companyName","optionValue","id","placeholder","Seleccione proveedor",1,"w-full",3,"options"],["formControlName","receptionDate","dateFormat","yy-mm-dd","showIcon","",1,"w-full"],["formControlName","dueDate","dateFormat","yy-mm-dd","showIcon","",1,"w-full"],["formControlName","deliveryDays",1,"w-full",3,"min","readonly"],["formControlName","status","placeholder","Seleccione estado",1,"w-full",3,"options"],[1,"grid","grid-cols-1","md:grid-cols-1","gap-6"],["mode","basic","chooseLabel","Seleccionar cotizaci\xF3n","chooseIcon","pi pi-upload","name","demo[]","url","","accept","application/pdf","maxFileSize","1000000",3,"onUpload"],["optionValue","id","display","chip","placeholder","Seleccione uno o varios centros de costo","formControlName","cecoIds",1,"w-full",3,"options"],["pTemplate","selectedItem"],["formArrayName","cecos",1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mt-4"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"mt-2","text-sm","w-full",3,"ngClass"],[4,"ngIf"],[3,"itemsFormArray"],[1,"flex","justify-end","gap-4","pt-6","border-t","mt-6"],["pButton","","type","button",1,"p-button-secondary",3,"click"],["pButton","","type","submit","label","Guardar"],[3,"formGroupName"],[1,"block","text-xs","font-medium","text-gray-700","mb-1"],["formControlName","participation","suffix","%","placeholder","Porcentaje",1,"w-full",3,"min","max"]],template:function(e,o){if(e&1){let n=v();u(0,"p-toast"),a(1,"div",1)(2,"h2",2),p(3,"Orden de compra"),r(),a(4,"form",3),h("ngSubmit",function(){return _(n),g(o.onSubmit())}),a(5,"div")(6,"h2",4),p(7,"Informaci\xF3n de la Orden"),r(),a(8,"div",5)(9,"div")(10,"label",6),p(11,"Nombre de la empresa"),r(),u(12,"input",7),r(),a(13,"div")(14,"label",6),p(15,"Proveedor"),r(),u(16,"p-select",8),r(),a(17,"div")(18,"label",6),p(19,"Fecha de recepci\xF3n"),r(),u(20,"p-datePicker",9),r(),a(21,"div")(22,"label",6),p(23,"Fecha de vencimiento"),r(),u(24,"p-datePicker",10),r(),a(25,"div")(26,"label",6),p(27,"D\xEDas para entregar"),r(),u(28,"p-inputNumber",11),r(),a(29,"div")(30,"label",6),p(31,"Estado"),r(),u(32,"p-select",12),r()(),a(33,"div",13)(34,"div")(35,"label",6),p(36,"Cotizaci\xF3n"),r(),a(37,"p-fileupload",14,0),h("onUpload",function(f){return _(n),g(o.onUpload(f))}),r()()()(),a(39,"div")(40,"h2",4),p(41,"Centros de Costo"),r(),a(42,"div")(43,"label",6),p(44,"Centro de costo"),r(),a(45,"p-multiselect",15),d(46,Mr,1,2,"ng-template",16),r()(),a(47,"div",17),d(48,Dr,4,4,"div",18),a(49,"div",19),p(50),d(51,Lr,2,0,"span",20),r()()(),a(52,"div")(53,"div",13),u(54,"app-purchase-items-table",21),r()(),a(55,"div",22)(56,"button",23),h("click",function(){return _(n),g(o.cancel())}),p(57,"Cancelar"),r(),u(58,"button",24),r()()()}e&2&&(l(4),s("formGroup",o.form),l(12),s("options",o.suppliersStore.supplierList()),l(12),s("min",0)("readonly",!0),l(4),s("options",o.statusOptions),l(13),s("options",o.costCenterStore.costCenters()),l(3),s("ngForOf",o.cecosFormArray.controls),l(),s("ngClass",Fe(11,Pr,o.totalParticipation!==100,o.totalParticipation===100)),l(),w(" Total participaci\xF3n: ",o.totalParticipation,"% "),l(),s("ngIf",o.totalParticipation!==100),l(3),s("itemsFormArray",o.itemsFormArray))},dependencies:[Z,Y,wi,Fi,U,to,ne,be,Di,Mi,Je,Ze,K,W,Li,D,ie,oe,M,ze,It,Ne,he,$e,Ue,Re,Si,Ti,wt,Ii,Dt],encapsulation:2})};var Lt=class t{constructor(i){this.http=i}baseUrl=`${He.apiUrl}pur/osp`;getAllOsp(){return this.http.get(this.baseUrl)}getOspById(i){return this.http.get(`${this.baseUrl}/${i}`)}static \u0275fac=function(e){return new(e||t)(ee(G))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};var kr={ospList:[],osp:null,query:""},Zt=je(qe(kr),Qe((t,i=b(Lt),e=b(I))=>({loadAllOsp:q(B(A(()=>i.getAllOsp().pipe(Q({next:o=>{j(t,{ospList:o.data}),e.add({severity:"success",summary:"Completado",detail:o.message})},error:()=>{}})))))})));var Vr=["ospTable"];function Nr(t,i){}function $r(t,i){if(t&1){let e=v();a(0,"p-button",10),h("onClick",function(){_(e);let n=m(2);return g(n.exportCSV())}),r()}}function Ur(t,i){if(t&1){let e=v();a(0,"div",11)(1,"div",12),p(2,"Plan Optimo de Suministros (OSP)"),r(),a(3,"p-iconfield"),u(4,"p-inputicon",13),a(5,"input",14),h("input",function(n){_(e),m();let c=ue(7),f=m();return g(f.onGlobalFilter(c,n))}),r()(),a(6,"button",15),h("click",function(){_(e);let n=m(2);return g(n.createPurchaseOrder(n.selectedItems))}),r()()}if(t&2){let e=m(2);l(6),li("label","( ",e.selectedItems==null?null:e.selectedItems.length," ) Generar Orden(es) de Compra")}}function Rr(t,i){if(t&1&&(a(0,"th",18),p(1),u(2,"p-sortIcon",19),r()),t&2){let e=i.$implicit;s("pSortableColumn",e.field),l(),w("",e.header," "),l(),s("field",e.field)}}function Br(t,i){if(t&1&&(a(0,"tr")(1,"th",16),u(2,"p-tableHeaderCheckbox"),r(),d(3,Rr,3,3,"th",17),r()),t&2){let e=m(2);l(3),s("ngForOf",e.cols)}}function Ar(t,i){if(t&1){let e=v();a(0,"tr")(1,"td",16),u(2,"p-tableCheckbox",20),r(),a(3,"td"),p(4),r(),a(5,"td"),p(6),r(),a(7,"td"),p(8),r(),a(9,"td"),p(10),r(),a(11,"td"),p(12),r(),a(13,"td"),p(14),r(),a(15,"td"),p(16),pe(17,"currency"),r(),a(18,"td")(19,"p-select",21),ut("ngModelChange",function(n){let c=_(e).$implicit;return dt(c.preferredSupplierId,n)||(c.preferredSupplierId=n),g(n)}),h("onChange",function(n){let c=_(e).$implicit;return g(c.preferredSupplierId=n.value)}),r()(),a(20,"td"),p(21),r()()}if(t&2){let e=i.$implicit,o=m(2);l(2),s("value",e),l(2),C(e.id),l(2),C(e.product.code),l(2),C(e.product.name),l(2),C(o.getProductTypeLabel(e.product.type)),l(2),C(e.unit),l(2),C(e.requiredQuantity),l(2),C(xe(17,11,e.product.estimatedUnitPrice,"COP")),l(3),s("options",o.filterSuppliers(e.suggestedSuppliers)),mt("ngModel",e.preferredSupplierId),l(2),C(e.status)}}function zr(t,i){if(t&1){let e=v();a(0,"div",5)(1,"p-toolbar",6),d(2,Nr,0,0,"ng-template",null,0,k)(4,$r,1,0,"ng-template",null,1,k),r(),a(6,"p-table",7,2),ut("selectionChange",function(n){_(e);let c=m();return dt(c.selectedItems,n)||(c.selectedItems=n),g(n)}),d(8,Ur,7,2,"ng-template",null,3,k)(10,Br,4,1,"ng-template",8)(11,Ar,22,14,"ng-template",9),r()()}if(t&2){let e=m();l(6),s("value",e.OspStore.ospList())("paginator",!0)("globalFilterFields",e.filterFields),mt("selection",e.selectedItems),s("rows",10)("columns",e.cols)("resizableColumns",!0)("scrollable",!0)("showCurrentPageReport",!0)("autoLayout",!0)}}var kt=class t{constructor(i){this.messageService=i}filterFields=["productName","unit","preferredSupplierId"];exportColumns;cols;OspStore=b(Zt);selectedOsp;suppplierStore=b($);selectedItems;listSuggestedSuppliers=[];OrdersStore=b(ce);productTypes=Object.values(Ni).map(i=>({label:Ht[i],value:i}));ospTable;ngOnInit(){this.cols=[{field:"id",header:"ID"},{field:"product.code",header:"C\xF3digo"},{field:"product.name",header:"Producto"},{field:"product.type",header:"Tipo"},{field:"unit",header:"Unidad"},{field:"requiredQuantity",header:"Cantidad"},{field:"product.estimatedUnitPrice",header:"Precio Unit."},{field:"suggestedSuppliers",header:"Proveedor Sugerido"}],this.filterFields=this.cols.map(i=>i.field),this.exportColumns=this.cols.map(i=>({title:i.header,dataKey:i.field})),this.suppplierStore.loadAllSuppliers(),this.OspStore.loadAllOsp()}onGlobalFilter(i,e){i.filterGlobal(e.target.value,"contains")}exportCSV(){this.ospTable.exportCSV()}getProductTypeLabel(i){return Ht[i]||i}filterSuppliers(i){return this.suppplierStore.supplierList().filter(e=>i.includes(e.id))}getDeliveryDays(i){return i.suggestedSuppliers.find(o=>o.id===i.preferredSupplierId)?.deliveryTimeDays??"-"}getUnitPrice(i){return i.suggestedSuppliers.find(o=>o.id===i.preferredSupplierId)?.unitPrice??0}createPurchaseOrder(i){console.log(i),i?.forEach(e=>{if(!e.suggestedSuppliers){this.messageService.add({severity:"warn",summary:`Proveedor requerido para el producto ${e.product.name}`,detail:"Debe seleccionar un proveedor antes de continuar."});return}}),this.OrdersStore.addPurchasesFromOSP(i)}static \u0275fac=function(e){return new(e||t)(F(I))};static \u0275cmp=E({type:t,selectors:[["app-osp-list"]],viewQuery:function(e,o){if(e&1&&te(Vr,5),e&2){let n;x(n=S())&&(o.ospTable=n.first)}},features:[P([I,Me,Zt,$,ce])],decls:3,vars:1,consts:[["start",""],["end",""],["ospTable",""],["caption",""],["class","card",4,"ngIf"],[1,"card"],["styleClass","mb-12"],["responsiveLayout","scroll","scrollHeight","500px","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords}",3,"selectionChange","value","paginator","globalFilterFields","selection","rows","columns","resizableColumns","scrollable","showCurrentPageReport","autoLayout"],["pTemplate","header"],["pTemplate","body"],["label","Exportar CSV","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"font-semibold","text-xl","mb-4"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pButton","",1,"p-button-sm","p-button-default",3,"click","label"],[2,"width","3rem"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"value"],["appendTo","body","optionLabel","companyName","optionValue","id","placeholder","Seleccione proveedor",3,"ngModelChange","onChange","options","ngModel"]],template:function(e,o){e&1&&(d(0,zr,12,10,"div",4),u(1,"p-confirmdialog")(2,"p-toast")),e&2&&s("ngIf",o.OspStore.ospList())},dependencies:[D,oe,M,Pe,it,Xe,U,et,tt,Ei,Oi,Ae,he,xi,Je,Ze,Z,Y,K,W,ge,Ve,ne,be,nt,ot,ve,rt,at,Ye,Ke,We,Ge,st,lt],encapsulation:2})};var Cc=[{path:"suppliers",data:{breadcrumb:"Proveedores"},component:Ot},{path:"suppliers-form/new",data:{breadcrumb:"Nuevo Proveedor"},component:ht},{path:"suppliers-form/edit/:id",data:{breadcrumb:"Editar Proveedor"},component:ht},{path:"orders",data:{breadcrumb:"\xD3rdenes"},component:Mt},{path:"orders-form/new",data:{breadcrumb:"Nueva Orden"},component:bt},{path:"orders-form/edit/:id",component:bt},{path:"osp",data:{breadcrumb:"Plan Optimo de Suministros (OSP)"},component:kt}];export{Cc as purchasesRoutes};
